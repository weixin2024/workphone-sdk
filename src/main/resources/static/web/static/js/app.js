(function(e){function t(t){for(var n,r,i=t[0],c=t[1],d=t[2],u=0,l=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&l.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);h&&h(t);while(l.length)l.shift()();return o.push.apply(o,d||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,r=1;r<a.length;r++){var i=a[r];0!==s[i]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},r={app:0},s={app:0},o=[];function i(e){return c.p+"static/js/"+({conversation:"conversation",login:"login",friendCircle:"friendCircle",groupAssistant:"groupAssistant",tools:"tools"}[e]||e)+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={conversation:1,login:1,friendCircle:1,groupAssistant:1,tools:1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise((function(t,a){for(var n="static/css/"+({conversation:"conversation",login:"login",friendCircle:"friendCircle",groupAssistant:"groupAssistant",tools:"tools"}[e]||e)+".css",s=c.p+n,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var d=o[i],u=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(u===n||u===s))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){d=l[i],u=d.getAttribute("data-href");if(u===n||u===s)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete r[e],h.parentNode.removeChild(h),a(o)},h.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){r[e]=0})));var n=s[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,a){n=s[e]=[t,a]}));t.push(n[2]=o);var d,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var l=new Error;d=function(t){u.onerror=u.onload=null,clearTimeout(h);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,a[1](l)}s[e]=void 0}};var h=setTimeout((function(){d({type:"timeout",target:u})}),12e4);u.onerror=u.onload=d,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],u=d.push.bind(d);d.push=t,d=d.slice();for(var l=0;l<d.length;l++)t(d[l]);var h=u;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0f9a":function(e,t,a){"use strict";a.r(t);a("d3b7");var n=a("bc3a"),r=a.n(n),s=a("5530"),o={routerMode:"history",baseUrl:"",credential:!0},i=Object(s["a"])({},o),c=i,d=r.a.create({baseURL:c.baseUrl,timeout:3e4,withCredentials:c.credential});d.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var u={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d.get(e,{params:t,headers:a})},post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d.post(e,t,{headers:a})},put:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d.put(e,t,{headers:a})},file:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d.post(e,t,{headers:Object.assign({"Content-Type":"multipart/form-data"},a)})},delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d.delete(e,{param:t,headers:Object.assign({"Content-Type":"multipart/form-data"},a)})}},l=function(e){return u.get("/api/products",e)},h={users:[]},f={users:function(e){return e.users}},m={QueryUsers:function(e){var t=e.commit;return new Promise((function(e,a){l().then((function(a){t("SET_USERS",a),e()})).catch((function(e){a(e)}))}))},SetUsers:function(e,t){var a=e.commit;a("SET_USERS",t)}},C={SET_USERS:function(e,t){e.users=t}};t["default"]={namespaced:!0,state:h,getters:f,actions:m,mutations:C}},"0fc6":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("5319");var n=a("b85c"),r=a("9393"),s=a("4360"),o=a("5c96");function i(e){}function c(e){if(e.message){var t=JSON.parse(e.message);s["a"].commit("nedb/SET_GROUP_SEND_LOG",t)}}function d(e){"success"===e.message?Object(o["Message"])({type:"success",message:"创建批量加好友任务成功！",duration:1e3}):Object(o["Message"])({type:"warning",message:"创建批量加好友任务失败！",duration:2e3})}function u(e){if(e.message){var t=JSON.parse(e.message);s["a"].commit("nedb/SET_AUTO_ADD_FRIEND_LOG",t)}else Object(o["Message"])({type:"info",message:"数据库没有批量加好友的数据！",duration:1e3})}function l(e){if(e.message){var t=JSON.parse(e.message);s["a"].commit("nedb/SET_PHONES_LIST",t)}else Object(o["Message"])({type:"info",message:"数据库没有号码！",duration:1e3})}function h(e){var t=e.message?JSON.parse(e.message):{};if(t.resultList&&t.resultList.length>0)t.resultList}function f(e){var t=e.message?JSON.parse(e.message):{};if(t.resultList&&t.resultList.length>0)t.resultList}function m(e){if(e.message){var t=JSON.parse(e.message);Object(o["Message"])({type:"success",message:"获取公共术语成功！",duration:1e3}),s["a"].commit("conversation/SET_PUBLIC_REPLY",t)}else Object(o["Message"])({type:"warning",message:"服务端没有设置公共术语！",duration:2e3})}function C(e){if(e.message){var t=JSON.parse(e.message);s["a"].commit("conversation/SET_PUBLIC_TAGS",t)}else Object(o["Message"])({type:"warning",message:"服务端没有设置公共标签！",duration:2e3})}function p(e){}function I(e){JSON.parse(e.message)}function g(e){JSON.parse(e.message)}var v={getBuinessListRespHandle:p,getTaskInfoListRespHandle:c,autoFriendAddTaskRespHandle:d,getAutoFriendAddTaskListRespHandle:u,getPhoneNumberListResp:l,getCommonTermsRespHandle:m,saveFriendTagDetailRespHandle:I,getWechatFriendDetailRespHandle:g,getCommonTagsRespHandle:C,deviceExitNoticeHandle:i,historyMessageListRespHandle:f,queryHistoryMessageRespHandle:h};a("99af");function b(e){Object(o["Message"])({type:"success",message:"获取微信二维码成功！",duration:1e3});var t=JSON.parse(e.message);t.ChatRoomId=-1,s["a"].dispatch("nedb/UpdateQrCode",t)}function T(e){var t=JSON.parse(e.message);t.ModifyTime=(new Date).getTime(),t.Requests||(t.Requests=[]),s["a"].dispatch("nedb/UpdateOrAddNewFriends",t)}function S(e){var t=JSON.parse(e.message);t.RspTime=(new Date).getTime(),s["a"].dispatch("nedb/AddOrUpdateZombies",t)}function k(e){var t,a=JSON.parse(e.message),r={},o=Object(n["a"])(a);try{for(o.s();!(t=o.n()).done;){var i=t.value;r[i.wechatId]||(r[i.wechatId]={}),r[i.wechatId][i.auto_type]=i.state}}catch(c){o.e(c)}finally{o.f()}s["a"].commit("nedb/SET_AUTO_TASK_CONFIG",r)}function N(e){var t=JSON.parse(e.message),a={1001:"智能抢红包",1002:"自动通过好友请求",1003:"自动通过群邀请",1004:"自动收转账"},n=0===t.state?"打开":"关闭",r=n+a[t.auto_type];Object(o["Message"])({type:"success",message:r,duration:1e3}),s["a"].dispatch("websocket/AutoTaskDetailList")}function O(e){var t=JSON.parse(e.message);t.ReqTime=(new Date).getTime(),s["a"].dispatch("nedb/UpdateNewFriendsByOne",t);var a,r=s["a"].getters["conversation/wechats"],i=t.WeChatId,c=Object(n["a"])(r);try{for(c.s();!(a=c.n()).done;){var d=a.value;if(d.WeChatId===t.WeChatId){i=d.WeChatNick;break}}}catch(u){c.e(u)}finally{c.f()}Object(o["Notification"])({title:"提示",dangerouslyUseHTMLString:!0,message:'<strong style="color:green;">'.concat(t.FriendNick,'</strong> 请求加 <strong style="color:green;">').concat(i,"</strong> 为好友！"),type:"warning",offset:50,duration:0})}var y={pullWeChatQrCodeTaskResultNoticeHandle:b,friendAddReqListNoticeHandle:T,friendAddReqeustNoticeHandle:O,postFriendDetectCountNoticeHandle:S,autoTaskDetailListRespHandle:k,autoTaskUpdateRespHandle:N};function R(e){var t=JSON.parse(e.message).Extra;if(s["a"].commit("websocket/SET_LOGIN_LOADING",!1),s["a"].commit("SET_USER",t),s["a"].commit("SET_TOKEN",JSON.parse(e.message).AccessToken),s["a"].commit("websocket/SET_LOGINED",1),s["a"].commit("SET_AUTO_LOGIN",1),"electron"===Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_CURRENTMODE){var a=window.require("electron"),n=a.ipcRenderer;n.send("operations","login")}s["a"].dispatch("nedb/SetFriendsMap"),s["a"].dispatch("nedb/SetChatRoomsMap"),s["a"].dispatch("nedb/SetAutoHiConfig"),s["a"].dispatch("nedb/SetAutoReply"),s["a"].dispatch("nedb/SetLuckMoneyMap"),s["a"].dispatch("websocket/GetWeChatsReq"),"/login"===s["a"].state.route.path&&s["a"].commit("route/ROUTE_CHANGED",{to:{path:"/"}})}function W(e){var t=JSON.parse(e.message),a=t.WeChats?t.WeChats:[];s["a"].commit("conversation/SET_WECHATS",a)}function M(e){var t=JSON.parse(e.message);if(t&&t.WeChats){var a,r=JSON.parse(e.message).WeChats,o=Object(n["a"])(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;s["a"].dispatch("websocket/TriggerConversationPushTask",i)}}catch(c){o.e(c)}finally{o.f()}}s["a"].dispatch("websocket/GetWeChatsReq")}function E(e){var t=JSON.parse(e.message);t.Labels&&t.Labels.length>0&&s["a"].dispatch("nedb/UpdateOrAddLabels",t)}function _(e){var t,a=JSON.parse(e.message),r=a.WeChatId,i=Object(n["a"])(s["a"].getters["conversation/wechats"]);try{for(i.s();!(t=i.n()).done;){var c=t.value;if(c.WeChatId===a.WeChatId){r=c.WeChatNick;break}}}catch(d){i.e(d)}finally{i.f()}Object(o["Notification"])({title:"提示",type:"warning",message:"".concat(r," 下线了！"),position:"top-right",offset:50,duration:0,showClose:!0}),s["a"].commit("conversation/MODIFY_WECHATS",{WeChatId:a.WeChatId,IsLogined:!1,IsOnline:!1})}function w(e){var t=JSON.parse(e.message);Object(o["Message"])({type:"success",message:"".concat(t.WeChatNick," 上线了！"),duration:1e3});var a,r=[],i=s["a"].getters["conversation/wechats"],c=Object(n["a"])(i);try{for(c.s();!(a=c.n()).done;){var d=a.value;d.IsOnline||d.WeChatId===t.WeChatId?r.push({WeChatId:d.WeChatId,IsLogin:!0}):r.push({WeChatId:d.WeChatId,IsLogin:!1})}}catch(u){c.e(u)}finally{c.f()}s["a"].dispatch("websocket/WeChatLoginNotice",r)}var F={deviceAuthRspHandle:R,getWeChatsRspHandle:W,weChatLoginNoticeRespHandle:M,contactLabelInfoNoticeHandle:E,weChatOfflineNoticeHandle:_,weChatOnlineNoticeHandle:w},L=(a("4d63"),a("2c68"));function A(e){var t=JSON.parse(e.message);switch(t.TaskType){case"AddFriendsTask":D(t);break;case"PostStopFriendDetectTask":U(t);break;case"DeleteSNSNewsTask":H(t);break;case"CircleLikeTask":G(t);break;case"WeChatGroupSendTask":j(t);break;case"ModifyFriendMemoTask":q(t);break;case"ContactLabelTask":x(t);break;case"ChatRoomActionTask":$(t);break;case"AddFriendInChatRoomTask":B(t);break;case"RequestTalkDetailTask":z(t);break;case"SendLuckyMoneyTask":K(t);break;case"RemittanceTask":J(t);break;case"DeleteFriendTask":Q(t);break;case"AgreeJoinChatRoomTask":Y(t);break;case"RevokeMessageTask":V(t);break;case"PhoneActionTask":P(t);break;default:break}}function D(e){var t=e.Success?"已申请":e.ErrMsg;e.result=t,e.TaskId=Number(e.TaskId),s["a"].dispatch("nedb/AddOrUpdateAddFriends",e)}function U(e){e.Success?Object(o["Message"])({type:"success",message:"停止清理僵尸粉成功！",duration:1e3}):Object(o["Message"])({type:"warning",message:"停止清理僵尸粉失败！",duration:2e3})}function P(e){e.Success?Object(o["Message"])({type:"success",message:"任务执行成功！",duration:1e3}):Object(o["Message"])({type:"warning",message:"任务执行失败！",duration:2e3})}function j(e){e.Success?Object(o["Message"])({type:"success",message:"群发成功！",duration:1e3}):Object(o["Message"])({type:"warning",message:"群发失败！",duration:2e3}),s["a"].dispatch("nedb/UpdateGroupSendTask",e)}function H(e){e.Success?Object(o["Message"])({type:"success",message:"删除朋友圈成功！",duration:1e3}):Object(o["Message"])({type:"warning",message:"删除朋友圈失败！",duration:2e3}),s["a"].dispatch("nedb/UpdateCircleTask",e)}function G(e){L["a"].circleTask.findOne({TaskId:e.TaskId},(function(t,a){if(!t&&a){var r=a.FriendId||a.WeChatId;e.Success&&a.IsCancel?(Object(o["Message"])({type:"success",message:"取消点赞成功！",duration:1e3}),L["a"].circles.findOne({WeChatId:a.WeChatId,FriendId:r},(function(t,r){var o,i=Object(n["a"])(r.Circles);try{for(i.s();!(o=i.n()).done;){var c=o.value;if(c.CircleId===a.CircleId){var d,u=[],l=Object(n["a"])(c.Likes);try{for(l.s();!(d=l.n()).done;){var h=d.value;h.FriendId!==e.WeChatId&&u.push(h)}}catch(t){l.e(t)}finally{l.f()}c.Likes=u;var f={WeChatId:a.WeChatId,Circles:[c]};s["a"].dispatch("nedb/UpdateOrAddCircles",f);break}}}catch(t){i.e(t)}finally{i.f()}}))):e.Success&&!a.IsCancel?(Object(o["Message"])({type:"success",message:"点赞成功！",duration:1e3}),L["a"].circles.findOne({WeChatId:a.WeChatId,FriendId:r},(function(e,t){var r,o=Object(n["a"])(t.Circles);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.CircleId===a.CircleId){var c={FriendId:a.WeChatId,PublishTime:parseInt((new Date).getTime()/1e3,10)};i.Likes?i.Likes.push(c):i.Likes=[c];var d={WeChatId:a.WeChatId,Circles:[i]};s["a"].dispatch("nedb/UpdateOrAddCircles",d);break}}}catch(e){o.e(e)}finally{o.f()}}))):a.IsCancel?Object(o["Message"])({type:"warning",message:"取消点赞失败！",duration:2e3}):Object(o["Message"])({type:"warning",message:"点赞失败！",duration:2e3}),s["a"].dispatch("nedb/UpdateCircleTask",e)}}))}function q(e){s["a"].dispatch("nedb/UpdateMemoTask",e);var t=e.TaskId;e.Success?(Object(o["Message"])({type:"success",message:"设置备注和标签任务成功！",duration:1e3}),L["a"].memoTask.findOne({TaskId:t},(function(e,t){e||t&&L["a"].friends.findOne({userId:t.userId,WeChatId:t.WeChatId,FriendId:t.FriendId},(function(e,a){if(!e&&a){if(t.DelFlag)switch(t.DelFlag){case 1:a.Memo="";break;case 2:a.Desc="";break;case 4:a.Phone="";break;default:break}else t.Memo&&(a.Memo=t.Memo),t.Phone&&(a.Phone=t.Phone+"，"),t.Desc&&(a.Desc=t.Desc);s["a"].dispatch("nedb/UpdateFriends",a),s["a"].dispatch("conversation/UpdateCurrentFriends",a)}}))}))):Object(o["Message"])({type:"warning",message:"设置备注和标签任务失败！",duration:2e3})}function x(e){s["a"].dispatch("nedb/UpdateMemoTask",e),e.Success?(Object(o["Message"])({type:"success",message:"设置备注任务成功！",duration:1e3}),L["a"].memoTask.findOne({TaskId:e.TaskId},(function(e,t){if(!e&&t){var a=t.AddList||t.DelList;L["a"].friends.findOne({userId:t.userId,WeChatId:t.WeChatId,FriendId:a},(function(e,a){if(!e&&a){if(t.AddList)if(t.LabelId)a.LabelIds=a.LabelIds+","+t.LabelId;else{var n={wechatId:a.WeChatId,friendId:a.FriendId};s["a"].dispatch("websocket/RequestContactsInfoTask",n)}else t.DelList&&a.LabelIds&&(a.LabelIds=a.LabelIds.replace(new RegExp(t.LabelId+",","g"),""),a.LabelIds=a.LabelIds.replace(new RegExp(t.LabelId,"g"),""),a.LabelIds=a.LabelIds.replace(/,$/,""));s["a"].dispatch("nedb/UpdateFriends",a),s["a"].dispatch("conversation/UpdateCurrentFriends",a)}}))}}))):Object(o["Message"])({type:"warning",message:"添加或删除标签任务失败！",duration:2e3})}function $(e){s["a"].dispatch("nedb/UpdateChatRoomTask",e),L["a"].chatRoomTask.findOne({taskId:e.TaskId},(function(t,a){if(!t&&a){var n=a.Action,r={0:"修改群名称",1:"修改群公告",2:"拉人进群",3:"踢人",4:"修改群内显示名",5:"设置保存到通讯",6:"设置消息免打扰",7:"删除并退出群",8:"建群",9:"查看所有群成员",10:"群主转让",11:"设置群邀请确认"};switch(e.Success?Object(o["Message"])({type:"success",message:"".concat(r[n],"成功！"),duration:1e3}):Object(o["Message"])({type:"warning",message:"".concat(r[n],"失败！").concat(e.ErrMsg),duration:2e3}),n){case 5:break;case 6:break;case 11:break;default:break}}}))}function B(e){s["a"].dispatch("nedb/UpdateChatRoomTask",e),e.Success?Object(o["Message"])({type:"success",message:"添加群成员到通讯录成功！",duration:1e3}):Object(o["Message"])({type:"warning",message:"添加群成员到通讯录失败！",duration:2e3})}function K(e){e.Success?(e.MsgSvrId=e.ErrMsg,e.MsgId=e.TaskId,Object(o["Message"])({type:"success",message:"红包发送成功！",duration:1e3}),L["a"].chats.findOne({MsgId:e.MsgId},(function(t,a){a&&(e.FriendId=a.FriendId,s["a"].dispatch("nedb/UpdateChats",e))}))):Object(o["Message"])({type:"warning",message:"红包发送失败",duration:2e3})}function J(e){e.Success?(e.MsgSvrId=e.ErrMsg,e.MsgId=e.TaskId,Object(o["Message"])({type:"success",message:"转账成功！",duration:1e3}),L["a"].chats.findOne({MsgId:e.MsgId},(function(t,a){a&&(e.FriendId=a.FriendId,s["a"].dispatch("nedb/UpdateChats",e))}))):Object(o["Message"])({type:"warning",message:"转账失败",duration:2e3})}function Q(e){e.Success?Object(o["Message"])({type:"success",message:"删除好友成功！",duration:1e3}):Object(o["Message"])({type:"warning",message:"删除好友失败！",duration:2e3})}function V(e){e.Success?(Object(o["Message"])({type:"success",message:"消息撤回成功！",duration:1e3}),s["a"].dispatch("nedb/SetChatRevoked",e)):Object(o["Message"])({type:"warning",message:"消息撤回失败",duration:2e3})}function z(e){e.ErrMsg&&Object(o["Message"])({type:"warning",message:"获取详情失败"+e.ErrMsg,duration:2e3})}function Y(e){e.Success?Object(o["Message"])({type:"success",message:"加入群聊成功！",duration:1e3}):Object(o["Message"])({type:"warning",message:"加入群聊失败！",duration:2e3})}var Z={taskResultMap:A};a("a434");function X(e){var t=JSON.parse(e.message);s["a"].dispatch("nedb/RemoveCircles",t)}function ee(e){var t=JSON.parse(e.message),a={WeChatId:t.WeChatId,Circles:[t.Circle]};s["a"].dispatch("nedb/UpdateOrAddCircles",a)}function te(e){var t=JSON.parse(e.message),a={FriendId:t.FriendId,PublishTime:t.PublishTime};L["a"].circles.findOne({WeChatId:t.WeChatId,FriendId:t.WeChatId},(function(e,r){if(!e&&r){var o,i=Object(n["a"])(r.Circles);try{for(i.s();!(o=i.n()).done;){var c=o.value;if(c.CircleId===t.CircleId){c.Likes?c.Likes.push(a):c.Likes=[a];var d={WeChatId:t.WeChatId,Circles:[c]};s["a"].dispatch("nedb/UpdateOrAddCircles",d);break}}}catch(e){i.e(e)}finally{i.f()}}}))}function ae(e){var t=JSON.parse(e.message);L["a"].circles.findOne({WeChatId:t.WeChatId,FriendId:t.WeChatId},(function(e,a){if(!e&&a){var r,o=Object(n["a"])(a.Circles);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.CircleId===t.CircleId){i.Comments?i.Comments.push(t.Comment):i.Comments=[t.Comment];var c={WeChatId:t.WeChatId,Circles:[i]};s["a"].dispatch("nedb/UpdateOrAddCircles",c);break}}}catch(e){o.e(e)}finally{o.f()}}}))}function ne(e){var t=JSON.parse(e.message);t.Circles&&t.Circles.length>0?s["a"].dispatch("nedb/UpdateOrAddCircles",t):Object(o["Message"])({type:"warning",message:"获取不到朋友圈",duration:1e3})}function re(e){var t=JSON.parse(e.message);s["a"].dispatch("nedb/UpdateCirclesImgs",t),Object(o["Message"])({type:"success",message:"获取朋友圈图片成功！",duration:1e3})}function se(e){var t=JSON.parse(e.message);s["a"].dispatch("nedb/UpdateCircleTask",t),t.Success?(Object(o["Message"])({type:"success",message:"删除评论成功！",duration:1e3}),L["a"].circleTask.findOne({TaskId:t.TaskId},(function(e,a){if(a){var r=a.FriendId||t.WeChatId;L["a"].circles.findOne({WeChatId:t.WeChatId,FriendId:r},(function(e,a){if(!e&&a){var r,o=Object(n["a"])(a.Circles);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.CircleId===t.CircleId){var c=i.Comments;if(c){var d,u=0,l=Object(n["a"])(c);try{for(l.s();!(d=l.n()).done;){var h=d.value;if(h.CommentId===t.CommentId){c.splice(u,1),i.Comments=c;var f={WeChatId:t.WeChatId,Circles:[i]};s["a"].dispatch("nedb/UpdateOrAddCircles",f);break}u++}}catch(e){l.e(e)}finally{l.f()}}break}}}catch(e){o.e(e)}finally{o.f()}}}))}}))):Object(o["Message"])({type:"warning",message:"删除评论失败！",duration:2e3})}function oe(e){var t=JSON.parse(e.message);s["a"].dispatch("nedb/UpdateCircleTask",t),t.Success?(Object(o["Message"])({type:"success",message:"评论成功！",duration:1e3}),L["a"].circleTask.findOne({TaskId:t.TaskId},(function(e,a){if(a){var r=a.FriendId||t.WeChatId,o={CommentId:t.CommentId,Content:a.Content,FromWeChatId:t.WeChatId,PublishTime:t.PusblishTime};a.ToWeChatId&&(o.ToWeChatId=a.ToWeChatId),a.FromWeChatId&&(o.FromWeChatId=a.FromWeChatId),L["a"].circles.findOne({WeChatId:t.WeChatId,FriendId:r},(function(e,a){if(!e&&a){var r,i=Object(n["a"])(a.Circles);try{for(i.s();!(r=i.n()).done;){var c=r.value;if(c.CircleId===t.CircleId){c.Comments?c.Comments.push(o):c.Comments=[o];var d={WeChatId:t.WeChatId,Circles:[c]};s["a"].dispatch("nedb/UpdateOrAddCircles",d);break}}}catch(e){i.e(e)}finally{i.f()}}}))}}))):Object(o["Message"])({type:"warning",message:"评论失败！",duration:2e3})}function ie(e){var t=JSON.parse(e.message);s["a"].dispatch("nedb/UpdateCircleTask",t),t.Success?Object(o["Message"])({type:"success",message:"朋友圈发送成功！",duration:1e3}):Object(o["Message"])({type:"warning",message:"朋友圈发送失败！",duration:2e3})}var ce={circleDelNoticeHandle:X,circlePushNoticeHandle:ne,postSNSNewsTaskResultNoticeHandle:ie,circleDetailNoticeHandle:re,circleLikeNoticeHandle:te,circleCommentReplyTaskResultNoticeHandle:oe,circleCommentDeleteTaskResultNoticeHandle:se,circleCommentNoticeHandle:ae,circleNewPublishNoticeHandle:ee},de=(a("4de4"),a("c975"),a("d81d"),a("466d"),a("1276"),a("498a"),0);function ue(e){Object(o["Message"])({type:"success",message:"会话列表已经更新",duration:1e3});var t=JSON.parse(e.message);t.WeChatId;t.Convers&&t.Convers.length>0&&s["a"].dispatch("nedb/UpdateOrAddConversations",t)}function le(e){var t=JSON.parse(e.message);if(s["a"].getters["conversation/freshDisabled"]){var a,r=t.Count||0,i=t.Page||0,c=100*(i+1)>=r,d=s["a"].getters.userId,u=t.WeChatId,l=[],h=Object(n["a"])(t.Friends);try{for(h.s();!(a=h.n()).done;){var f=a.value;f.Page=i,f.WeChatId=u,f.userId=d,l.push(f)}}catch(m){h.e(m)}finally{h.f()}s["a"].dispatch("nedb/AddFriends",l),c&&(Object(o["Message"])({type:"success",message:"好友列表推送完成",duration:1e3}),s["a"].commit("conversation/SET_FRESH_DISABLED",!1))}}function he(e){var t=JSON.parse(e.message);if("electron"===s["a"].getters.currentMode){var a=window.require("electron"),n=a.ipcRenderer;n.send("operations","newMsg")}s["a"].dispatch("nedb/UpdateOrAddConversationsByTalk",t),s["a"].dispatch("nedb/AddChats",t),-1===t.FriendId.indexOf("@chatroom")&&-1===t.FriendId.indexOf("im.chatroom")&&(s["a"].dispatch("nedb/AutoHi",t),s["a"].dispatch("nedb/AutoReply",t))}function fe(e){var t=JSON.parse(e.message);t.IsSend=!0,t.msgSvrId||(t.msgSvrId=t.CreateTime),s["a"].dispatch("nedb/UpdateOrAddConversationsByTalk",t),s["a"].dispatch("nedb/AddChats",t)}function me(e){}function Ce(e){var t=JSON.parse(e.message);if(t.Friend){var a={};for(var n in t.Friend)t.Friend.hasOwnProperty(n)&&(a[n]=t.Friend[n]);a.WeChatId=t.WeChatId,a.userId=s["a"].getters.userId,s["a"].dispatch("nedb/UpdateFriendsByOne",a)}}function pe(e){var t=JSON.parse(e.message);t.Success?(Object(o["Message"])({type:"success",message:"消息发送成功!",duration:1e3}),s["a"].dispatch("nedb/UpdateChats",t),L["a"].chats.findOne({WeChatId:t.WeChatId,MsgId:t.MsgId},(function(e,t){e||s["a"].dispatch("nedb/UpdateOrAddConversationsByTalk",t)}))):Object(o["Message"])({type:"error",message:"MsgId:".concat(t.MsgId,"发送失败"),duration:2e3})}function Ie(e){var t=JSON.parse(e.message);t.Label&&s["a"].dispatch("nedb/AddLabel",t)}function ge(e){var t=JSON.parse(e.message);s["a"].dispatch("nedb/DeleteLabel",t)}function ve(e){var t=JSON.parse(e.message);s["a"].dispatch("nedb/AddChatsByHistory",t)}function be(e){var t=JSON.parse(e.message);t.Content&&"string"===typeof t.Content&&(s["a"].commit("conversation/SET_URL",r["a"].decode(t.Content)),s["a"].dispatch("nedb/UpdateChatImgUrl",t))}function Te(e){var t=JSON.parse(e.message);t.Success?Object(o["Message"])({type:"success",message:"打开红包成功！",duration:1e3}):(Object(o["Message"])({type:"error",message:"打开红包失败！",duration:2e3}),t.Amount="打开红包失败！"),s["a"].dispatch("nedb/UpdateLuckMoney",t)}function Se(e){var t=JSON.parse(e.message);s["a"].commit("conversation/SET_HB_DETAIL_VISIBLE",!0),s["a"].commit("conversation/SET_HB_DETAIL",t)}function ke(e){var t=JSON.parse(e.message),a=t.Count||0,n=t.Page||0,r=2*(n+1)>=a;r&&(Object(o["Message"])({type:"success",message:"群聊列表推送完成",duration:1e3}),s["a"].commit("conversation/SET_FRESH_DISABLED",!1)),s["a"].dispatch("nedb/AddChatRooms",t)}function Ne(e){var t=JSON.parse(e.message);de++,setTimeout((function(){s["a"].dispatch("nedb/AddOrUpdateChatRoomMembers",t),de--}),500*de)}function Oe(e){var t=JSON.parse(e.message);t.ChatRoom&&s["a"].dispatch("nedb/AddOrUpdateChatRoom",t)}function ye(e){var t=JSON.parse(e.message);s["a"].dispatch("nedb/RemoveChatRoom",t)}function Re(e){var t=JSON.parse(e.message);t.Success?(Object(o["Message"])({type:"success",message:"获取群二维码成功！",duration:1e3}),s["a"].dispatch("nedb/UpdateQrCode",t)):Object(o["Message"])({type:"error",message:"获取群二维码失败！",duration:2e3})}function We(e){var t=JSON.parse(e.message);if(t.Content){var a={},n=s["a"].getters["conversation/currentWeChatId"],r=s["a"].getters["conversation/currentFriends"],o=r[n],i=o&&o.UserName?o.UserName:"",c={WeChatId:t.WeChatId,UserName:t.UserName};if(t.UserName===i)for(var d in o)o.hasOwnProperty(d)&&(c[d]=o[d]);switch(t.What){case"Change_NickName":a={NickName:t.Content},c.NickName=t.Content;break;case"Change_PublicNotice":a={Notice:t.Content},c.Notice=t.Content;break;case"Change_ShowName":for(var u=/[a-zA-z0-9_]{6,20}=/g,l=t.Content.match(u),h=l.map((function(e){return e.replace(/=/,"")})),f=t.Content.replace(/{|}/gi,"").split(/[a-zA-z0-9_]{6,20}=/),m=f.filter((function(e){return e&&e.trim()})),C=[],p=0;p<m.length;p++)C.push({UserName:h[p],ShowName:m[p]});a={ShowNameList:C},c.ShowNameList=C;break;case"Change_MyShowName":a={SelfDisplayName:t.Content},c.SelfDisplayName=t.Content;break;case"Change_Owner":a={Owner:t.Content},c.Owner=t.Content;break;case"Change_Avatar":a={Avatar:t.Content},c.Avatar=t.Content;break;default:a={Avatar:t.Content};var I=t.Content.split(";");a={MemberList:I},c.MemberList=I;break}if(t.sqlStr=a,s["a"].dispatch("nedb/UpdateChatRoom",t),t.UserName===i){var g={wechatId:t.WeChatId,friend:c};s["a"].commit("conversation/SET_CURRENT_FRIENDS",g)}}}function Me(e){var t=JSON.parse(e.message);s["a"].dispatch("nedb/RemoveFriend",t)}var Ee={conversationPushNoticeHandle:ue,friendPushNoticeHandle:le,chatroomPushNoticeHandle:ke,friendAddNoticeHandle:Ce,contactLabelAddNoticeHandle:Ie,contactLabelDelNoticeHandle:ge,friendDelNoticeHandle:Me,friendTalkNoticeHandle:he,postMessageReadNoticeHandle:me,takeMoneyTaskResultNoticeHandle:Te,queryHbDetailTaskResultNoticeHandle:Se,talkToFriendTaskResultNoticeHandle:pe,requestTalkDetailTaskResultNoticeHandle:be,chatRoomDelNoticeHandle:ye,chatRoomAddNoticeHandle:Oe,chatRoomChangedNoticeHandle:We,chatRoomMembersNoticeHandle:Ne,pullChatRoomQrCodeTaskResultNoticeHandle:Re,weChatTalkToFriendNoticeHandle:fe,historyMsgPushNoticeHandle:ve};function _e(e){var t=JSON.parse(e.data),a=t.msgType;switch(a){case"DeviceAuthRsp":F.deviceAuthRspHandle(t);break;case"GetWeChatsRsp":F.getWeChatsRspHandle(t);break;case"WeChatLoginNoticeResp":F.weChatLoginNoticeRespHandle(t);break;case"AccountForceOfflineNotice":break;case"WeChatLoginNotice":break;case"WeChatOfflineNotice":F.weChatOfflineNoticeHandle(t);break;case"WeChatOnlineNotice":F.weChatOnlineNoticeHandle(t);break;case"PullWeChatQrCodeTaskResultNotice":y.pullWeChatQrCodeTaskResultNoticeHandle(t);break;case"FriendAddReqListNotice":y.friendAddReqListNoticeHandle(t);break;case"PostFriendDetectCountNotice":y.postFriendDetectCountNoticeHandle(t);break;case"AutoTaskDetailListResp":y.autoTaskDetailListRespHandle(t);break;case"AutoTaskUpdateResp":y.autoTaskUpdateRespHandle(t);break;case"FriendAddReqeustNotice":y.friendAddReqeustNoticeHandle(t);break;case"CirclePushNotice":ce.circlePushNoticeHandle(t);break;case"CircleDelNotice":ce.circleDelNoticeHandle(t);break;case"CircleNewPublishNotice":ce.circleNewPublishNoticeHandle(t);break;case"CircleLikeNotice":ce.circleLikeNoticeHandle(t);break;case"CircleCommentNotice":ce.circleCommentNoticeHandle(t);break;case"PostSNSNewsTaskResultNotice":ce.postSNSNewsTaskResultNoticeHandle(t);break;case"CircleDetailNotice":ce.circleDetailNoticeHandle(t);break;case"CircleCommentReplyTaskResultNotice":ce.circleCommentReplyTaskResultNoticeHandle(t);break;case"CircleCommentDeleteTaskResultNotice":ce.circleCommentDeleteTaskResultNoticeHandle(t);break;case"ConversationPushNotice":Ee.conversationPushNoticeHandle(t);break;case"FriendPushNotice":Ee.friendPushNoticeHandle(t);break;case"FriendTalkNotice":Ee.friendTalkNoticeHandle(t);break;case"WeChatTalkToFriendNotice":Ee.weChatTalkToFriendNoticeHandle(t);break;case"FriendAddNotice":Ee.friendAddNoticeHandle(t);break;case"TalkToFriendTaskResultNotice":Ee.talkToFriendTaskResultNoticeHandle(t);break;case"FriendDelNotice":Ee.friendDelNoticeHandle(t);break;case"ContactLabelInfoNotice":F.contactLabelInfoNoticeHandle(t);break;case"ContactLabelAddNotice":Ee.contactLabelAddNoticeHandle(t);break;case"ContactLabelDelNotice":Ee.contactLabelDelNoticeHandle(t);break;case"RequestTalkDetailTaskResultNotice":Ee.requestTalkDetailTaskResultNoticeHandle(t);break;case"TakeMoneyTaskResultNotice":Ee.takeMoneyTaskResultNoticeHandle(t);break;case"QueryHbDetailTaskResultNotice":Ee.queryHbDetailTaskResultNoticeHandle(t);break;case"HistoryMsgPushNotice":Ee.historyMsgPushNoticeHandle(t);break;case"PostMessageReadNotice":Ee.postMessageReadNoticeHandle(t);break;case"ChatroomPushNotice":Ee.chatroomPushNoticeHandle(t);break;case"ChatRoomMembersNotice":Ee.chatRoomMembersNoticeHandle(t);break;case"ChatRoomAddNotice":Ee.chatRoomAddNoticeHandle(t);break;case"ChatRoomDelNotice":Ee.chatRoomDelNoticeHandle(t);break;case"ChatRoomChangedNotice":Ee.chatRoomChangedNoticeHandle(t);break;case"PullChatRoomQrCodeTaskResultNotice":Ee.pullChatRoomQrCodeTaskResultNoticeHandle(t);break;case"TaskResultNotice":Z.taskResultMap(t);break;case"MsgReceivedAck":switch(t.refMsgId){case 1001:break;default:break}break;case"Error":var n=JSON.parse(t.message),r=n.ErrorCode,i=n.ErrorMsg;"NoRight"===n.ErrorCode&&"账号密码错误"===i&&s["a"].commit("websocket/SET_LOGIN_LOADING",!1),"NoRight"!==n.ErrorCode||"账号已在别处登陆"!==i&&"token过期"!==i?Object(o["Message"])({type:"error",message:i,duration:2e3}):(i+="，请重新登陆 !",o["MessageBox"].alert(i,r,{type:"error",showClose:!1,confirmButtonText:"确定并退出",callback:function(){s["a"].commit("SET_TOKEN","")}}));break;case"DeviceExitNotice":v.deviceExitNoticeHandle(t);break;case"GetTaskInfoListResp":v.getTaskInfoListRespHandle(t);break;case"AutoFriendAddTaskResp":v.autoFriendAddTaskRespHandle(t);break;case"GetAutoFriendAddTaskListResp":v.getAutoFriendAddTaskListRespHandle(t);break;case"GetPhoneNumberListResp":v.getPhoneNumberListResp(t);break;case"GetCommonTermsResp":v.getCommonTermsRespHandle(t);break;case"GetCommonTagsResp":v.getCommonTagsRespHandle(t);break;case"QueryHistoryMessageResp":break;case"HistoryMessageListResp":break;case"BizContactPushNotice":s["a"].commit("conversation/SET_GH_MAP",JSON.parse(t.message));break;case"warning":var c=JSON.parse(t.message);Object(o["Message"])({type:"warning",message:c.msg,duration:2e3}),s["a"].dispatch("nedb/RemoveChatsByMsgId",c);break;default:break}}var we=null,Fe=null;function Le(){return 1e4*(new Date).getTime()+1e4*Math.random()}var Ae={webSocketUrl:"ws://www.jjldkj.com:13088",webSocketObj:null,webSocketState:0,loginLoading:!1,logined:0},De={webSocketUrl:function(e){return e.webSocketUrl},webSocketObj:function(e){return e.webSocketObj},webSocketState:function(e){return e.webSocketState},loginLoading:function(e){return e.loginLoading},logined:function(e){return e.logined}},Ue={createWebSocket:function(e){var t=e.dispatch,a=e.getters,n=e.commit;a.webSocketObj&&n("RESET_WEB_SOCKET"),n("CREATE_WEB_SOCKET",t)},HeartBeatReq:function(e){var t=e.rootGetters,a=e.getters,n=e.commit;we&&clearTimeout(we),Fe&&clearTimeout(Fe),1===a.webSocketObj.readyState&&a.logined&&(we=setTimeout((function(){var e={Id:1001,MsgType:"HeartBeatReq",AccessToken:t.token};n("SEND_SOCK",e),Fe=setTimeout((function(){t.autoLogin}),5e3)}),5e3))},DeviceAuthReq:function(e){var t=e.rootGetters,a=e.commit,n=t.loginInfo,s={Id:1010,AccessToken:"",MsgType:"DeviceAuthReq",Content:{AuthType:2,Credential:r["a"].encode(n.name+":"+n.pass)}};a("SEND_SOCK",s)},AccountLogoutNotice:function(e){var t=e.rootGetters,a=e.commit,n={Id:3054,MsgType:"AccountLogoutNotice",Content:{UnionId:Number(t.currentUser.UnionId),AccountType:2},AccessToken:t.token};a("SEND_SOCK",n)},GetWeChatsReq:function(e){var t=e.rootGetters,a=e.commit,n={MsgType:"GetWeChatsReq",Content:{AccountType:t.currentUser.AccountType,UnionId:t.currentUser.UnionId}};a("SEND_SOCK",n)},WeChatLoginNotice:function(e,t){var a=e.rootGetters,n=e.commit,r={MsgType:"WeChatLoginNotice",Content:{SupplierId:a.currentUser.SupplierId,UnionId:a.currentUser.UnionId,AccountType:a.currentUser.AccountType,WeChats:t}};n("SEND_SOCK",r)},PullWeChatQrCodeTask:function(e,t){var a=e.commit,n={MsgType:"PullWeChatQrCodeTask",Content:{WeChatId:t}};a("SEND_SOCK",n)},PhoneActionTask:function(e,t){var a=e.commit,n={WeChatId:t.wechatId,Action:t.action,TaskId:Le().toString()},r={MsgType:"PhoneActionTask",Content:n};a("SEND_SOCK",r)},PullFriendAddReqListTask:function(e,t){var a=e.commit,n={WeChatId:t,StartTime:0,OnlyNew:!1,GetAll:!0},r={MsgType:"PullFriendAddReqListTask",Content:n};a("SEND_SOCK",r)},AcceptFriendAddRequestTask:function(e,t){var a=e.rootState,n=e.rootGetters,r=e.commit,s=n["currentWechats"][n["currentNavs"][a.route.name]],o={MsgType:"AcceptFriendAddRequestTask",Content:{WeChatId:s,FriendId:t.FriendId,Operation:1,Remark:t.Remark||""}};r("SEND_SOCK",o)},AddFriendsTask:function(e,t){var a=e.rootGetters,n=e.dispatch,r=e.commit,s={WeChatId:t.wechatId,Phones:t.phones,message:t.message,Remark:t.memo,TaskId:t.taskId},o={MsgType:"AddFriendsTask",Content:s};r("SEND_SOCK",o),s.userId=a.userId,s.result="指令已发出",n("nedb/AddOrUpdateAddFriends",s,{root:!0})},PostFriendDetectTask:function(e,t){e.rootGetters,e.dispatch;var a=e.commit,n={WeChatId:t.wechatId,TaskId:Le().toString(),OnlyCheck:!t.delete,SkipHour:t.time,Mode:t.circle?6:1},r={MsgType:"PostFriendDetectTask",Content:n};a("SEND_SOCK",r)},PostStopFriendDetectTask:function(e,t){e.dispatch;var a=e.commit,n={WeChatId:t,TaskId:Le().toString()},r={MsgType:"PostStopFriendDetectTask",Content:n};a("SEND_SOCK",r)},AutoTaskDetailList:function(e,t){var a=e.rootGetters,n=e.commit,r={cid:a.currentUser.SupplierId},s={MsgType:"AutoTaskDetailList",Content:r};n("SEND_SOCK",s)},AutoTaskUpdate:function(e,t){var a=e.rootGetters,n=e.commit,r={cid:a.currentUser.SupplierId,wechatId:t.wechatId,auto_type:t.type,state:t.state},s={MsgType:"AutoTaskUpdate",Content:r};n("SEND_SOCK",s)},PullFriendCircleTask:function(e,t){var a=e.commit,n=Math.floor((new Date).getTime()/1e3),r={WeChatId:t.wechatId,FriendId:t.friendId,StartTime:t.startTime?t.startTime:n,Count:t.count?t.count:10},s={MsgType:"PullFriendCircleTask",Content:r};a("SEND_SOCK",s)},TriggerCirclePushTask:function(e,t){var a=e.commit,n={WeChatId:t.WeChatId,CircleIds:[t.CircleId]},r={MsgType:"TriggerCirclePushTask",Content:n};a("SEND_SOCK",r)},DeleteSNSNewsTask:function(e,t){var a=e.dispatch,n=e.commit,r={WeChatId:t.WeChatId,CircleId:t.CircleId,TaskId:Le().toString()},s={MsgType:"DeleteSNSNewsTask",Content:r};n("SEND_SOCK",s);var o={};for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);o.MsgType="DeleteSNSNewsTask",a("nedb/AddCircleTask",o,{root:!0})},CircleLikeTask:function(e,t){var a=e.dispatch,r=e.commit,s=!1;if(t.Likes){var o,i=Object(n["a"])(t.Likes);try{for(i.s();!(o=i.n()).done;){var c=o.value;if(c.FriendId===t.WeChatId){s=!0;break}}}catch(h){i.e(h)}finally{i.f()}}var d={WeChatId:t.WeChatId,CircleId:t.CircleId,IsCancel:s,TaskId:Le().toString()},u={MsgType:"CircleLikeTask",Content:d};r("SEND_SOCK",u);var l={WeChatId:t.WeChatId,CircleId:t.CircleId,IsCancel:s,TaskId:d.TaskId,MsgType:"CircleLikeTask"};t.FriendId&&(l.FriendId=t.FriendId),a("nedb/AddCircleTask",l,{root:!0})},PullCircleDetailTask:function(e,t){var a=e.commit,n={MsgType:"PullCircleDetailTask",Content:{WeChatId:t.WeChatId,CircleId:t.CircleId}};a("SEND_SOCK",n)},CircleCommentDeleteTask:function(e,t){var a=e.dispatch,n=e.commit,r=t.currentComment,s={WeChatId:t.WeChatId,CircleId:t.CircleId,CommentId:r.CommentId,PublishTime:r.PublishTime,TaskId:Le().toString()},o={MsgType:"CircleCommentDeleteTask",Content:s};n("SEND_SOCK",o);var i={WeChatId:t.WeChatId,CircleId:t.CircleId,CommentId:r.CommentId,PublishTime:r.PublishTime,TaskId:s.TaskId,MsgType:"CircleCommentDeleteTask",Comments:t.Comments};t.FriendId&&(i.FriendId=t.FriendId),a("nedb/AddCircleTask",i,{root:!0})},CircleCommentReplyTask:function(e,t){var a=e.dispatch,n=e.commit,r={WeChatId:t.WeChatId,CircleId:t.CircleId,Content:t.value,TaskId:Le().toString(),IsResend:!1};t.currentComment&&(r.ToWeChatId=t.currentComment.FromWeChatId,r.ReplyCommentId=t.currentComment.CommentId);var s={MsgType:"CircleCommentReplyTask",Content:r};n("SEND_SOCK",s);var o={WeChatId:t.WeChatId,CircleId:t.CircleId,Content:t.value,TaskId:r.TaskId,IsResend:!1,MsgType:"CircleCommentReplyTask"};t.FriendId&&(o.FriendId=t.FriendId),t.currentComment&&(o.ToWeChatId=t.currentComment.FromWeChatId,o.ReplyCommentId=t.currentComment.CommentId),a("nedb/AddCircleTask",o,{root:!0})},PostSNSNewsTask:function(e,t){var a=e.dispatch,n=e.commit,r={WeChatId:t.WeChatId,Content:t.Content,Attachment:t.Attachment,Comment:t.Comment,TaskId:Le().toString(),Visible:t.Visible},s={MsgType:"PostSNSNewsTask",Content:r};n("SEND_SOCK",s);var o={};for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);o.MsgType="PostSNSNewsTask",a("nedb/AddCircleTask",o,{root:!0})},WeChatGroupSendTask:function(e,t){var a=e.dispatch,n=e.commit,r={TaskId:Le().toString(),FriendIds:t.FriendIds,ContentType:t.ContentType,Content:t.Content,WeChatId:t.WeChatId},s={MsgType:"WeChatGroupSendTask",Content:r};n("SEND_SOCK",s);var o={};for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);o.MsgType="WeChatGroupSendTask",a("nedb/AddGroupSendTask2Nedb",o,{root:!0})},AddTaskTimeInfo:function(e,t){e.dispatch;var a=e.rootGetters,n=e.commit,r={};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);r.accountid=a.currentUser.UnionId;var o={MsgType:"AddTaskTimeInfo",Content:r};n("SEND_SOCK",o)},GetTaskInfoList:function(e,t){var a=e.rootGetters,n=e.commit,r={accountid:a.currentUser.UnionId,pageSize:100,pageNo:1},s={MsgType:"GetTaskInfoList",Content:r};n("SEND_SOCK",s)},AutoFriendAddTask:function(e,t){e.rootGetters;var a=e.commit,n={MsgType:"AutoFriendAddTask",Content:t};a("SEND_SOCK",n)},GetAutoFriendAddTaskList:function(e){var t=e.rootGetters,a=e.commit,n={MsgType:"GetAutoFriendAddTaskList",Content:{accountid:t.currentUser.UnionId,pageSize:1e4,pageNo:1}};a("SEND_SOCK",n)},GetPhoneNumberList:function(e){var t=e.rootGetters,a=e.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t["currentWechats"]["searchPhones"]&&(n.wechatid=t["currentWechats"]["searchPhones"]);var r={MsgType:"GetPhoneNumberList",Content:n};a("SEND_SOCK",r)},TriggerConversationPushTask:function(e,t){var a=e.rootGetters,n=e.commit,r=t||a["conversation/currentWeChatId"],s={MsgType:"TriggerConversationPushTask",Content:{WeChatId:r,StartTime:0}};n("SEND_SOCK",s)},TriggerHistoryMsgPushTask:function(e,t){e.rootGetters;var a=e.commit,n={MsgType:"TriggerHistoryMsgPushTask",Content:{WeChatId:t.wechatId,FriendId:t.friendId,StartTime:t.startTime,EndTime:t.endTime}};a("SEND_SOCK",n)},TriggerFriendPushTask:function(e){var t=e.rootGetters,a=e.commit,n=t["conversation/currentWeChatId"],r={MsgType:"TriggerFriendPushTask",Content:{WeChatId:n}};a("SEND_SOCK",r)},RequestContactsInfoTask:function(e,t){var a=e.commit,n={MsgType:"RequestContactsInfoTask",Content:{WeChatId:t.wechatId,Contact:t.friendId}};a("SEND_SOCK",n)},RequestChatRoomInfoTask:function(e,t){var a=e.commit,n={MsgType:"RequestChatRoomInfoTask",Content:{WeChatId:t.wechatId,ChatRoomId:t.friendId,Flag:1}};a("SEND_SOCK",n)},TriggerChatroomPushTask:function(e,t){var a=e.commit,n={MsgType:"TriggerChatroomPushTask",Content:{WeChatId:t,Flag:1}};a("SEND_SOCK",n)},TriggerMessageReadTask:function(e,t){var a=e.commit,n={MsgType:"TriggerMessageReadTask",Content:{WeChatId:t.WeChatId,FriendId:t.FriendId}};a("SEND_SOCK",n)},TalkToFriendTask:function(e,t){var a=e.commit,n=e.dispatch,s=(new Date).getTime(),o={WeChatId:t.WeChatId,FriendId:t.FriendId,ContentType:t.ContentType,Content:r["a"].encode(t.Content),MsgId:Le().toString()};t.Remark&&(o.Remark=t.Remark,o.Content=r["a"].encode(t.Content.replace(/@.+ /,"")));var i={MsgType:"TalkToFriendTask",Content:o};a("SEND_SOCK",i);var c={};for(var d in o)o.hasOwnProperty(d)&&(c[d]=o[d]);t.Remark&&(c.Content=r["a"].encode(t.Content)),c.CreateTime=s.toString(),c.IsSend=!0,n("nedb/AddChats",c,{root:!0})},ModifyFriendMemoTask:function(e,t){var a=e.commit,n=e.dispatch;t.TaskId=Le().toString();var r={MsgType:"ModifyFriendMemoTask",Content:t};a("SEND_SOCK",r),n("nedb/AddMemoTask",t,{root:!0})},ContactLabelTask:function(e,t){var a=e.commit,n=e.dispatch,r={WeChatId:t.WeChatId,LabelId:t.LabelId||0,taskId:Le().toString()};t.LabelName&&(r.LabelName=t.LabelName),t.AddList&&(r.AddList=t.AddList),t.DelList&&(r.DelList=t.DelList);var s={MsgType:"ContactLabelTask",Content:r};a("SEND_SOCK",s);var o={};for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);o.TaskId=r.taskId,n("nedb/AddMemoTask",o,{root:!0})},ChatRoomActionTask:function(e,t){var a=e.commit,n=e.dispatch,r={WeChatId:t.WeChatId,Action:t.Action,taskId:Le().toString()};t.ChatRoomId&&(r.ChatRoomId=t.ChatRoomId),t.IntValue&&(r.IntValue=t.IntValue),t.Content&&(r.Content=t.Content);var s={MsgType:"ChatRoomActionTask",Content:r};a("SEND_SOCK",s);var o={};for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);o.TaskId=r.taskId,n("nedb/AddChatRoomTask",o,{root:!0})},PullChatRoomQrCodeTask:function(e,t){var a=e.commit,n={MsgType:"PullChatRoomQrCodeTask",Content:{WeChatId:t.WeChatId,ChatRoomId:t.UserName,taskId:Le().toString()}};a("SEND_SOCK",n)},AddFriendInChatRoomTask:function(e,t){var a=e.commit,n=e.dispatch,r={MsgType:"AddFriendInChatRoomTask",Content:{WeChatId:t.WeChatId,ChatroomId:t.ChatroomId,FriendId:t.FriendId,Message:t.Message,Remark:t.Remark,TaskId:Le().toString()}};a("SEND_SOCK",r);var s=r.Content;n("nedb/AddChatRoomTask",s,{root:!0})},SendLuckyMoneyTask:function(e,t){var a=e.commit,n=e.dispatch,s=(new Date).getTime(),o=1e4*s+1e4*Math.random(),i={WeChatId:t.WeChatId,FriendId:t.FriendId,Money:t.Money,Number:t.Number,Passwd:t.Passwd,Wish:t.Wish,TaskId:o},c={MsgType:"SendLuckyMoneyTask",Content:i};a("SEND_SOCK",c);var d={},u={Title:t.Wish,Key:"",InvalidTime:""};u.Money=t.Money,d.Content=r["a"].encode(JSON.stringify(u)),d.ContentType="LuckyMoney",d.FriendId=t.FriendId,d.WeChatId=t.WeChatId,d.MsgId=o.toString(),d.CreateTime=s.toString(),d.IsSend=!0,n("nedb/AddChats",d,{root:!0})},RemittanceTask:function(e,t){var a=e.commit,n=e.dispatch,s=(new Date).getTime(),o={WeChatId:t.WeChatId,FriendId:t.FriendId,Money:t.Money,Passwd:t.Passwd,Memo:t.Memo,TaskId:Le().toString()},i={MsgType:"RemittanceTask",Content:o};a("SEND_SOCK",i);var c={},d={Title:t.Memo,Feedesc:"￥"+t.Money/100,Key:"",PaySubType:1,InvalidTime:""};c.Content=r["a"].encode(JSON.stringify(d)),c.ContentType="MoneyTrans",c.FriendId=t.FriendId,c.WeChatId=t.WeChatId,c.MsgId=o.TaskId,c.CreateTime=s.toString(),c.IsSend=!0,n("nedb/AddChats",c,{root:!0})},RequestTalkDetailTask:function(e,t){var a=e.commit,n=(e.dispatch,{MsgId:t.MsgId,WeChatId:t.WeChatId,FriendId:t.FriendId,MsgSvrId:t.msgSvrId?t.msgSvrId:"",Md5:t.Content.Md5?t.Content.Md5:"",GetOriginal:!0}),r={MsgType:"RequestTalkDetailTask",Content:n};a("SEND_SOCK",r)},DeleteFriendTask:function(e,t){var a=e.commit,n=(e.dispatch,{WeChatId:t.WeChatId,FriendId:t.FriendId,TaskId:Le().toString()}),r={MsgType:"DeleteFriendTask",Content:n};a("SEND_SOCK",r)},RevokeMessageTask:function(e,t){var a=e.commit,n=(e.dispatch,{MsgId:t.msgSvrId,WeChatId:t.WeChatId,FriendId:t.FriendId,TaskId:t.msgSvrId}),r={MsgType:"RevokeMessageTask",Content:n};a("SEND_SOCK",r)},AgreeJoinChatRoomTask:function(e,t){var a=e.commit,n=(e.dispatch,{MsgType:"AgreeJoinChatRoomTask",Content:{WeChatId:t.WeChatId,Talker:t.Talker,MsgSvrId:t.MsgSvrId,MsgContent:t.MsgContent,taskId:Le().toString()}});a("SEND_SOCK",n)},TakeLuckyMoneyTask:function(e,t){var a=e.commit,n=e.dispatch,r={MsgType:"TakeLuckyMoneyTask",Content:{WeChatId:t.WeChatId,FriendId:t.FriendId,MsgSvrId:t.MsgSvrId,MsgKey:t.MsgKey,TaskId:Le().toString()}};a("SEND_SOCK",r);var s={};for(var o in r.Content)r.Content.hasOwnProperty(o)&&(s[o]=r.Content[o]);n("nedb/InsertLuckMoney",s,{root:!0})},QueryHbDetailTask:function(e,t){var a=e.commit,n=(e.dispatch,{MsgType:"QueryHbDetailTask",Content:{WeChatId:t.WeChatId,HbUrl:t.HbUrl}});a("SEND_SOCK",n)},TriggerBizContactPushTask:function(e){var t=e.commit,a=e.rootGetters,n={MsgType:"TriggerBizContactPushTask",Content:{WeChatId:a["conversation/currentWeChatId"]}};t("SEND_SOCK",n)},GetCommonTerms:function(e){var t=e.rootGetters,a=e.commit,n=Number(t.currentUser.UnionId);if(n){var r={MsgType:"GetCommonTerms",Content:{id:n,name:"pc"}};a("SEND_SOCK",r)}},GetCommonTags:function(e){var t=e.rootGetters,a=e.commit,n=Number(t.currentUser.UnionId);if(n){var r={MsgType:"GetCommonTags",Content:{id:n,name:"pc"}};a("SEND_SOCK",r)}},GetWechatFriendDetail:function(e,t){var a=e.rootGetters;e.commit,Number(a.SupplierId),t.WeChatId,t.FriendId}},Pe={SET_WEBSOCKET_URL:function(e,t){e.webSocketUrl=t},SET_LOGINED:function(e,t){e.logined=t},CREATE_WEB_SOCKET:function(e,t){e.webSocketObj=new WebSocket(e.webSocketUrl),e.webSocketObj.onopen=function(){},e.webSocketObj.onmessage=function(e){t("HeartBeatReq"),_e(e)},e.webSocketObj.onerror=function(e){},e.webSocketObj.onclose=function(){e.token&&o["MessageBox"].alert("websocket已经关闭，请重新登陆","提示",{confirmButtonText:"确定",callback:function(e){if(t("AccountLogoutNotice"),"electron"===Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_CURRENTMODE){var a=window.require("electron"),n=a.ipcRenderer;n.send("operations","logout")}else window.location.reload()}})}},RESET_WEB_SOCKET:function(e){e.webSocketObj=null},SEND_SOCK:function(e,t){switch(e.webSocketObj.readyState){case 1:e.webSocketObj.send(JSON.stringify(t));break;case 2:case 3:break;default:setTimeout((function(){e.webSocketObj.send(JSON.stringify(t))}),1e3);break}},SET_LOGIN_LOADING:function(e,t){e.loginLoading=t}};t["default"]={namespaced:!0,state:Ae,getters:De,actions:Ue,mutations:Pe}},"1cbe":function(e,t,a){"use strict";a.r(t);var n=a("b85c"),r=a("2b0e"),s={wechats:[],currentWechat:{},currentTab:"LastChat",lastChatPages:{},addressListPages:{},chatRoomPages:{},currentFriends:{},freshDisabled:!1,content:"",remark:"",contentType:"Text",url:"",hbDetailVisible:!1,hbDetail:{WeChatId:"",Success:!1,ErrMsg:"",HbUrl:"",TotalNum:null,TotalAmount:null,RecNum:null,Records:[],RecAmount:null},publicReply:[],publicTags:[],ghList:[],ghMap:{}},o={wechats:function(e){return e.wechats},wechatsLogin:function(e){var t,a=[],r=Object(n["a"])(e.wechats);try{for(r.s();!(t=r.n()).done;){var s=t.value;s.IsOnline&&s.IsLogined&&a.push(s)}}catch(o){r.e(o)}finally{r.f()}return a},currentWechat:function(e){return e.currentWechat},currentWeChatId:function(e){return e.currentWechat.WeChatId?e.currentWechat.WeChatId:""},currentTab:function(e){return e.currentTab},lastChatPages:function(e){return e.lastChatPages},addressListPages:function(e){return e.addressListPages},chatRoomPages:function(e){return e.chatRoomPages},currentFriends:function(e){return e.currentFriends},freshDisabled:function(e){return e.freshDisabled},content:function(e){return e.content},remark:function(e){return e.remark},contentType:function(e){return e.contentType},url:function(e){return e.url},hbDetailVisible:function(e){return e.hbDetailVisible},hbDetail:function(e){return e.hbDetail},publicReply:function(e){return e.publicReply},publicTags:function(e){return e.publicTags},ghMap:function(e){return e.ghMap},ghList:function(e){return e.ghList}},i={UpdateCurrentFriends:function(e,t){var a=e.commit,n=e.getters,r=n.currentFriends,s=n.currentWeChatId,o=r[s];if(t.WeChatId===s&&o&&t.FriendId===o.FriendId){var i={wechatId:t.WeChatId,friend:t};a("SET_CURRENT_FRIENDS",i)}},UpdateCurrentFriendsByRoom:function(e,t){var a=e.commit,n=e.getters,r=n.currentFriends,s=n.currentWeChatId,o=r[s];if(t.WeChatId===s&&o&&t.UserName===o.UserName){var i={wechatId:t.WeChatId,friend:t};a("SET_CURRENT_FRIENDS",i)}}},c={SET_WECHATS:function(e,t){e.wechats=t},SET_CURRENT_WECHAT:function(e,t){e.currentWechat=t},SET_FRESH_DISABLED:function(e,t){e.freshDisabled=t},SET_CURRENT_TAB:function(e,t){e.currentTab=t},SET_LAST_CHAT_PAGES:function(e,t){r["default"].set(e.lastChatPages,t.wechatId,t.page)},SET_ADDRESS_LIST_PAGES:function(e,t){r["default"].set(e.addressListPages,t.wechatId,t.page)},SET_CHAT_ROOM_PAGES:function(e,t){r["default"].set(e.chatRoomPages,t.wechatId,t.page)},SET_CURRENT_FRIENDS:function(e,t){r["default"].set(e.currentFriends,t.wechatId,t.friend)},SET_CONTENT:function(e,t){e.content=t},SET_REMARK:function(e,t){e.remark=t},SET_CONTENT_TYPE:function(e,t){e.contentType=t},SET_URL:function(e,t){e.url=t},SET_HB_DETAIL_VISIBLE:function(e,t){e.hbDetailVisible=t},SET_HB_DETAIL:function(e,t){for(var a in t)t.hasOwnProperty(a)&&r["default"].set(e.hbDetail,a,t[a])},SET_PUBLIC_REPLY:function(e,t){e.publicReply=t},SET_PUBLIC_TAGS:function(e,t){e.publicTags=t},SET_GH_LIST:function(e,t){e.ghList=t.Contacts},SET_GH_MAP:function(e,t){r["default"].set(e.ghMap,t.WeChatId,t.Contacts)},MODIFY_WECHATS:function(e,t){var a,r=Object(n["a"])(e.wechats);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.WeChatId===t.WeChatId){s.IsLogined=t.IsLogined,s.IsOnline=t.IsOnline;break}}}catch(o){r.e(o)}finally{r.f()}}};t["default"]={namespaced:!0,state:s,getters:o,actions:i,mutations:c}},"2a74":function(e,t,a){"use strict";a.r(t);a("4160"),a("d3b7"),a("ac1f"),a("5319"),a("159b"),a("ddb0");var n=a("d307"),r={};n.keys().forEach((function(e){"./index.js"!==e&&(r[e.replace(/(\.\/|\.js)/g,"")]=n(e).default)})),t["default"]=r},"2c68":function(e,t,a){"use strict";a("a15b");var n=a("0dff"),r=a.n(n),s=a("df7c"),o=a.n(s),i="/";if("electron"===Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_CURRENTMODE){var c=window.require("electron"),d=c.remote;i=d.app.getPath("userData")}var u=new r.a({autoload:!0,filename:o.a.join(i,"/wechats.db")}),l=new r.a({autoload:!0,filename:o.a.join(i,"/friends.db")}),h=new r.a({autoload:!0,filename:o.a.join(i,"/labels.db")}),f=new r.a({autoload:!0,filename:o.a.join(i,"/chatRooms.db")}),m=new r.a({autoload:!0,filename:o.a.join(i,"/chatRoomMembers.db")}),C=new r.a({autoload:!0,filename:o.a.join(i,"/chatRoomTask.db")}),p=new r.a({autoload:!0,filename:o.a.join(i,"/chatRoomConfig.db")}),I=new r.a({autoload:!0,filename:o.a.join(i,"/conversations.db")}),g=new r.a({autoload:!0,filename:o.a.join(i,"/chats.db")}),v=new r.a({autoload:!0,filename:o.a.join(i,"/myReply.db")}),b=new r.a({autoload:!0,filename:o.a.join(i,"/newFriends.db")}),T=new r.a({autoload:!0,filename:o.a.join(i,"/addFriendTask.db")}),S=new r.a({autoload:!0,filename:o.a.join(i,"/autoAcceptConfig.db")}),k=new r.a({autoload:!0,filename:o.a.join(i,"/autoHiConfig.db")}),N=new r.a({autoload:!0,filename:o.a.join(i,"/autoReply.db")}),O=new r.a({autoload:!0,filename:o.a.join(i,"/zombies.db")}),y=new r.a({autoload:!0,filename:o.a.join(i,"/circleTask.db")}),R=new r.a({autoload:!0,filename:o.a.join(i,"/circles.db")}),W=new r.a({autoload:!0,filename:o.a.join(i,"/groupSendTask.db")}),M=new r.a({autoload:!0,filename:o.a.join(i,"/qrcode.db")}),E=new r.a({autoload:!0,filename:o.a.join(i,"/chatDetail.db")}),_=new r.a({autoload:!0,filename:o.a.join(i,"/chatDetailTask.db")}),w=new r.a({autoload:!0,filename:o.a.join(i,"/memoTask.db")}),F=new r.a({autoload:!0,filename:o.a.join(i,"/luckMoney.db")});t["a"]={wechats:u,friends:l,labels:h,chatRooms:f,chatRoomTask:C,chatRoomConfig:p,chatRoomMembers:m,conversations:I,chats:g,myReply:v,chatDetail:E,chatDetailTask:_,memoTask:w,luckMoney:F,qrcode:M,newFriends:b,addFriendTask:T,autoHiConfig:k,autoReply:N,zombies:O,autoAcceptConfig:S,circles:R,circleTask:y,groupSendTask:W}},4360:function(e,t,a){"use strict";a("b0c0"),a("d3b7");var n=a("2b0e"),r=a("2f62"),s=a("2a74"),o=a("bc3a"),i=a.n(o),c=a("4328"),d=a.n(c),u=i.a.create({timeout:1e4});function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){u({url:e,method:"get",params:t}).then((function(e){a(e)})).catch((function(e){n(e)}))}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){u({url:e,method:"post",data:d.a.stringify(t)}).then((function(e){a(e)})).catch((function(e){n(e)}))}))}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){u({url:e,method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a(e)})).catch((function(e){n(e)}))}))}u.interceptors.request.use((function(e){return T.getters.token&&(e.headers.Authorization=sessionStorage.getItem("token")),e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){return e}),(function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="错误请求";break;case 401:e.message="未授权，请重新登录";break;case 403:e.message="拒绝访问";break;case 404:e.message="请求错误,未找到该资源";break;case 405:e.message="请求方法未允许";break;case 408:e.message="请求超时";break;case 500:e.message="服务器端出错";break;case 501:e.message="网络未实现";break;case 502:e.message="网络错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网络超时";break;case 505:e.message="http版本不支持该请求";break;default:e.message="未知错误".concat(e.response.status)}else e.message="网络链接到服务器失败 请检查网络";return Promise.reject(e)}));var m={get:l,post:h,fileUpload:f},C="http://www.jjldkj.com:10089/fileUpload";function p(e){return m.fileUpload(C,e)}var I={token:"",currentUser:{},autoLogin:0,currentMode:"web",loginInfo:{},taskTimeDialogCircle:!1,currentNavs:{friendCircle:"circleSend",groupAssistant:"groupSend",tools:"newFriend"},currentWechats:{circleSend:"",circleMy:"",circleLog:"",groupSend:"",groupLog:"",newFriend:"",addFriend:"",addFriendAuto:"",searchPhones:"",autoHi:"",qrCode:"",autoTask:"",autoReply:"",clearFans:"",phoneManagement:""}},g={token:function(e){return e.token},currentUser:function(e){return e.currentUser},userId:function(e){return 1e4*e.currentUser.SupplierId+e.currentUser.UnionId||""},autoLogin:function(e){return e.autoLogin},loginInfo:function(e){return e.loginInfo},taskTimeDialogCircle:function(e){return e.taskTimeDialogCircle},currentNavs:function(e){return e.currentNavs},currentWechats:function(e){return e.currentWechats},currentMode:function(e){return e.currentMode}},v={UploadFile:function(e,t){e.commit;return new Promise((function(e,a){p(t).then((function(t){var a=t.data.data;e(a)})).catch((function(e){a(e)}))}))}},b={SET_TOKEN:function(e,t){e.token=t},SET_USER:function(e,t){e.currentUser=t},SET_AUTO_LOGIN:function(e,t){e.autoLogin=t},SET_LOGIN_INFO:function(e,t){e.loginInfo=t},SET_TASK_TIME_DIALOG_CIRLCE:function(e,t){e.taskTimeDialogCircle=t},SET_CURRENT_NAV:function(e,t){n["default"].set(e.currentNavs,e.route.name,t.navPath)},SET_CURRENT_WECHATS:function(e,t){n["default"].set(e.currentWechats,e.currentNavs[e.route.name],t)},SET_CURRENT_MODE:function(e,t){e.currentMode=t}};n["default"].use(r["a"]);var T=t["a"]=new r["a"].Store({modules:s["default"],state:I,getters:g,mutations:b,actions:v,strict:!1})},4604:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("4de4"),a("4160"),a("b64b"),a("159b"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"},on:{contextmenu:function(e){e.preventDefault()}}},[e.token?a("header-page"):e._e(),e.token?a("el-container",{staticClass:"el-container"},[a("aside-page"),a("main-page")],1):e._e(),e.token?e._e():[a("router-view",{attrs:{name:"login"}})]],2)},s=[],o=(a("ac1f"),a("5319"),a("5530")),i=a("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-header",{staticClass:"header-page",staticStyle:{"-webkit-app-region":"drag"},attrs:{height:"64px"}},[n("div",{staticClass:"logo-box"},[n("img",{staticClass:"logo-img",attrs:{src:a("cdf3"),alt:""}}),n("span",{staticClass:"logo-title can-not-select"},[e._v("聚聊客服")])]),n("ul",{staticClass:"nav-ul"},e._l(e.navs,(function(t,a){return n("li",{key:a,staticClass:"nav-li",class:{"active-nav":e.$route.path===t.navPath},staticStyle:{"-webkit-app-region":"no-drag"},on:{click:function(a){return e.showPath(t)}}},[n("i",{class:t.navIcon,attrs:{"aria-hidden":"true"}}),n("span",{staticClass:"nav-name can-not-select",domProps:{textContent:e._s(t.navName)}})])})),0),n("el-dropdown",{staticClass:"my-el-dropdown",staticStyle:{"-webkit-app-region":"no-drag"},on:{command:e.handleCommand}},[n("div",{staticClass:"el-dropdown-link"},[n("el-avatar",{attrs:{icon:"el-icon-user-solid",size:"small"}}),n("span",{staticClass:"nick-name can-not-select",domProps:{textContent:e._s(this.$store.getters.currentUser.NickName)}})],1),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{disabled:""}},[n("i",{staticClass:"fa fa-plus-square",attrs:{"aria-hidden":"true"}}),e._v("其他 ")]),n("el-dropdown-item",{attrs:{disabled:""}},[n("i",{staticClass:"fa fa-question-circle",attrs:{"aria-hidden":"true"}}),e._v("帮助 ")]),n("el-dropdown-item",{attrs:{command:"logout"}},[n("i",{staticClass:"fa fa-sign-out",attrs:{"aria-hidden":"true"}}),e._v("退出 ")])],1)],1),"electron"===e.$store.getters.currentMode?n("div",{staticClass:"menu",staticStyle:{"-webkit-app-region":"no-drag"}},[n("div",{staticClass:"icon-smaller",on:{click:function(t){return e.minimizeWindow()}}},[n("hr",{staticClass:"smaller"})]),n("div",{staticClass:"icon-bigger",on:{click:function(t){return e.maximizeWindow()}}},[n("div",{staticClass:"bigger"})]),n("div",{staticClass:"icon-close",on:{click:function(t){return e.hiddenWindow()}}},[n("div",{staticClass:"close"})])]):e._e()],1)},d=[],u={name:"HeaderPage",data:function(){return{navs:[{navName:"会话",navIcon:"fa fa-h-square fa-lg",navPath:"/conversation"},{navName:"群发",navIcon:"fa fa-paper-plane-o fa-lg",navPath:"/group-assistant"},{navName:"朋友圈",navIcon:"fa fa-chrome fa-lg",navPath:"/friend-circle"},{navName:"功能大全",navIcon:"fa fa-th-large fa-lg",navPath:"/tools"}]}},methods:{showPath:function(e){this.$route.path!==e.navPath&&this.$router.push({path:e.navPath})},handleCommand:function(e){var t=this;switch(e){case"logout":this.$confirm("你将退出登陆 ?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$store.dispatch("websocket/AccountLogoutNotice"),t.$store.commit("websocket/SET_LOGINED",0),t.$store.commit("SET_TOKEN","")})).catch((function(){}));break;default:this.$message("click on item "+e);break}},minimizeWindow:function(){this.$ipcRenderer.send("operations","min")},maximizeWindow:function(){this.$ipcRenderer.send("operations","max")},hiddenWindow:function(){this.$ipcRenderer.send("operations","hidden")}}},l=u,h=(a("e1ee"),a("2877")),f=Object(h["a"])(l,c,d,!1,null,"bcc0d296",null),m=f.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-aside",{staticClass:"aside-page",attrs:{width:"150px"}},["conversation"!==e.$route.name?n("ul",{staticClass:"aside-navs scroll"},e._l(e.navs[e.$route.name],(function(t,a){return n("li",{key:a,staticClass:"aside-nav can-not-select",class:{"nav-chose":e.currentNavs[e.$route.name]===t.navPath},on:{click:function(a){return e.setNav(t)}}},[n("i",{staticClass:"fa-lg",class:t.navIcon}),n("span",{domProps:{textContent:e._s(t.navName)}})])})),0):n("div",{staticClass:"aside-wechats"},[n("div",{staticClass:"aside-wechats-title"},[n("i",{staticClass:"fa fa-weixin fa-lg",attrs:{"aria-hidden":"true"}}),n("p",{staticClass:"can-not-select font-size-16"},[e._v(e._s(e.wechatsLogin.length)+"/"+e._s(e.wechats.length))])]),n("ul",{staticClass:"wechats-list scroll"},e._l(e.reorganizedWechats,(function(t,r){return n("li",{key:r,staticClass:"wechat-item",class:[{"wechat-chose":t.WeChatId===e.currentWeChatId},{"item-disabled":!t.IsOnline||!t.IsLogined}],attrs:{index:t.WeChatId,title:t.WeChatNick},on:{click:function(a){return e.choseWechat(t)}}},[n("div",{staticClass:"avatar-messages"},[n("img",{staticClass:"wechat-avatar",attrs:{src:t.Avatar||a("f067"),alt:"微信头像"}}),e.newMessageNotice[t.WeChatId]?n("span",{staticClass:"new-message-notice",domProps:{textContent:e._s(e.newMessageNotice[t.WeChatId])}}):e._e(),t.IsOnline?e._e():n("span",{staticClass:"iconfont jubo-off-line",class:{"item-disabled":!t.IsOnline||!t.IsLogined}})]),n("span",{staticClass:"wechat-nick ellipsis wechat-nick-hide",domProps:{textContent:e._s(t.WeChatNick)}})])})),0),n("div",{staticClass:"aside-wechats-bottom"},[n("el-tooltip",{attrs:{effect:"dark",content:"选择微信登陆",placement:"right"}},[n("el-button",{attrs:{type:"text",size:"medium"},on:{click:e.showDialog}},[n("i",{staticClass:"fa fa-cogs fa-lg",staticStyle:{color:"white"},attrs:{"aria-hidden":"true"}})])],1)],1)]),n("el-dialog",{staticClass:"my-dialog",attrs:{title:"请选择微信登陆","destroy-on-close":"",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{staticClass:"chose-wechat-login-form scroll"},e._l(e.wechats,(function(t,a){return n("div",{key:a,staticClass:"wechat-info",class:[{login:t.IsOnline&&t.IsLogined},{selected:t.IsOnline&&e.wechatsWantToLogin.indexOf(t.WeChatId)>=0}],on:{click:function(a){return e.choseWechatLogin(t)}}},[n("img",{class:[{"no-online":!t.IsOnline}],attrs:{src:t.Avatar,alt:""}}),n("p",{class:[{"no-online":!t.IsOnline}],domProps:{textContent:e._s(t.WeChatNick)}}),t.IsOnline?n("span",{staticClass:"iconfont jubo-on-line"}):n("span",{staticClass:"iconfont jubo-off-line"})])})),0),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.WeChatLoginNotice(e.wechatsWantToLogin)}}},[e._v("确 定")])],1)],1)],1)},p=[],I=(a("c975"),a("a434"),a("b85c")),g={data:function(){return{navs:{friendCircle:[{navName:"发朋友圈",navIcon:"el-icon-thumb",navPath:"circleSend"},{navName:"我的朋友圈",navIcon:"el-icon-help",navPath:"circleMy"},{navName:"朋友圈日志",navIcon:"el-icon-info",navPath:"circleLog"}],groupAssistant:[{navName:"群发助手",navIcon:"el-icon-s-promotion",navPath:"groupSend"},{navName:"群发记录",navIcon:"el-icon-info",navPath:"groupLog"}],tools:[{navName:"新的朋友",navIcon:"el-icon-message-solid",navPath:"newFriend"},{navName:"添加好友",navIcon:"el-icon-s-custom",navPath:"addFriend"},{navName:"批量加好友",navIcon:"el-icon-s-check",navPath:"addFriendAuto"},{navName:"号码查询",navIcon:"el-icon-search",navPath:"searchPhones"},{navName:"自动功能",navIcon:"el-icon-time",navPath:"autoTask"},{navName:"自动回复",navIcon:"el-icon-position",navPath:"autoReply"},{navName:"自动打招呼",navIcon:"el-icon-s-comment",navPath:"autoHi"},{navName:"批量打标签",navIcon:"el-icon-collection-tag",navPath:"takeLabels"},{navName:"清理僵尸粉",navIcon:"el-icon-delete-solid",navPath:"clearFans"},{navName:"导出二维码",navIcon:"el-icon-picture",navPath:"qrCode"},{navName:"手机管理",navIcon:"el-icon-s-tools",navPath:"phoneManagement"},{navName:"好友筛选",navIcon:"el-icon-search",navPath:"friendsFilter"}]},dialogFormVisible:!1,wechatsWantToLogin:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(i["b"])({currentNavs:"currentNavs",ghMap:"conversation/ghMap",wechats:"conversation/wechats",wechatsLogin:"conversation/wechatsLogin",currentWechat:"conversation/currentWechat",currentWeChatId:"conversation/currentWeChatId",newMessageNotice:"nedb/newMessageNotice",friendsAll:"nedb/friendsAll",chatRoomsAll:"nedb/chatRoomsAll"})),{},{reorganizedWechats:function(){var e,t=[],a=Object(I["a"])(this.wechats);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.IsOnline&&n.IsLogined&&t.push(n)}}catch(i){a.e(i)}finally{a.f()}var r,s=Object(I["a"])(this.wechats);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.IsOnline&&o.IsLogined||t.push(o)}}catch(i){s.e(i)}finally{s.f()}return t}}),methods:{setNav:function(e){this.$store.commit("SET_CURRENT_NAV",e)},choseWechat:function(e){var t=this;if(e.IsOnline)if(e.IsLogined){var a=e.WeChatId;a!==this.currentWechat.WeChatId&&(this.$store.commit("conversation/SET_CURRENT_WECHAT",e),this.$store.dispatch("nedb/SetConversations",a),this.$store.dispatch("nedb/SetFriends",a),this.$store.dispatch("nedb/SetChatRooms",a),this.$store.dispatch("nedb/SetLabels",a),this.$store.dispatch("nedb/SetMembers",a),this.ghMap[a]||this.$store.dispatch("websocket/TriggerBizContactPushTask"),setTimeout((function(){0===t.chatRoomsAll.length&&t.$store.dispatch("websocket/TriggerFriendPushTask"),0===t.chatRoomsAll.length&&t.$store.dispatch("websocket/TriggerChatroomPushTask",a)}),500))}else this.$message.warning("微信未登陆，请先登陆！");else this.$message.error("手机微信不在线，请检查手机！")},showDialog:function(){var e=this;this.$store.dispatch("websocket/GetWeChatsReq"),setTimeout((function(){var t,a=Object(I["a"])(e.wechats);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.IsOnline&&e.wechatsWantToLogin.push(n.WeChatId)}}catch(r){a.e(r)}finally{a.f()}}),500),this.dialogFormVisible=!0},choseWechatLogin:function(e){if(e.IsOnline){var t=this.wechatsWantToLogin.indexOf(e.WeChatId);-1===t?this.wechatsWantToLogin.push(e.WeChatId):this.wechatsWantToLogin.splice(t,1)}else this.$message({message:"该微信未上线,不能登陆!",type:"warning"})},WeChatLoginNotice:function(e){var t,a=[],n=Object(I["a"])(this.wechats);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.indexOf(r.WeChatId)>=0?a.push({WeChatId:r.WeChatId,IsLogin:!0}):a.push({WeChatId:r.WeChatId,IsLogin:!1})}}catch(s){n.e(s)}finally{n.f()}this.$store.dispatch("websocket/WeChatLoginNotice",a),this.dialogFormVisible=!1}},mounted:function(){var e=this;"/"===this.$store.state.route.path&&(this.dialogFormVisible=!0),setTimeout((function(){var t,a=Object(I["a"])(e.wechats);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.IsOnline&&e.wechatsWantToLogin.push(n.WeChatId)}}catch(r){a.e(r)}finally{a.f()}}),500),this.$store.dispatch("nedb/SetNewMessageNotice")}},v=g,b=(a("f9fc"),Object(h["a"])(v,C,p,!1,null,"4af5efe4",null)),T=b.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticClass:"main-page"},[e.currentNav?a("div",{staticClass:"slot-main-title"},[a("span",{staticStyle:{"font-size":"blod"},domProps:{textContent:e._s(e.$options.filters.titleFilter(e.currentNav))}}),"conversation"!==e.$route.name&&e.freshMap.indexOf(e.currentNav)>=0?a("el-button",{staticStyle:{padding:"5px","margin-left":"10px"},attrs:{type:"success",size:"small",disabled:!e.canRefresh,loading:!e.canRefresh},on:{click:function(t){return e.refresh(e.currentWechats)}}},[e.canRefresh?a("span",{staticClass:"el-icon-refresh"}):e._e(),e.canRefresh?a("span",[e._v(e._s(e.refreshMap[e.currentNav]))]):a("span",[e._v(e._s(e.timeOut)+"秒后再试")])]):e._e()],1):e._e(),e.currentNav&&"groupAssistant"!==e.$route.name&&e.currentNavMap.indexOf(e.currentNav)<0?a("wechats-list"):e._e(),a("router-view",{staticClass:"nav-page",attrs:{name:"main"}})],1)},k=[],N=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wechats-list scroll"},[a("span",{staticClass:"tips"},[e._v("所在微信")]),a("el-select",{staticClass:"el-select-wechats-list",attrs:{size:"small",clearable:"",placeholder:"请选择微信"},on:{change:function(t){return e.queryInfoByWechatId(t)}},model:{value:e.currentWechat,callback:function(t){e.currentWechat=t},expression:"currentWechat"}},e._l(e.wechats,(function(e,t){return a("el-option",{key:t,attrs:{label:e.WeChatNick,value:e.WeChatId,disabled:!e.IsOnline||!e.IsLogined}})})),1)],1)}),O=[],y={name:"WechatsList",data:function(){return{}},computed:Object(o["a"])(Object(o["a"])({},Object(i["b"])({currentNavs:"currentNavs",wechats:"conversation/wechats",currentWechats:"currentWechats"})),{},{currentNav:function(){return this.currentNavs[this.$route.name]},currentWechat:{get:function(){return this.currentWechats[this.currentNav]},set:function(e){this.$store.commit("SET_CURRENT_WECHATS",e)}}}),methods:{queryInfoByWechatId:function(e){switch(this.$store.commit("SET_CURRENT_WECHATS",e),this.currentNav){case"newFriend":this.$store.dispatch("nedb/SetNewFriends",e);break;case"addFriend":this.$store.dispatch("nedb/SetAddFriends",e);break;case"clearFans":this.$store.dispatch("nedb/SetZombies",e);break;case"qrCode":this.$store.dispatch("nedb/SetQrCode",e);break;case"autoReply":this.$message({message:"自动回复 的设置对所有的微信生效,无需选中微信!",type:"warning"});break;case"autoHi":this.$message({message:"自动打招呼 的设置对所有的微信生效,无需选中微信!",type:"warning"});break;case"groupSend":this.$store.dispatch("nedb/SetGroupSendFriends",e),this.$store.dispatch("nedb/SetGroupSendLabels",e);break;case"groupLog":this.$store.dispatch("nedb/SetGroupSendLog",e);break;case"circleSend":this.$store.dispatch("nedb/SetCircleFriends",e),this.$store.dispatch("nedb/SetCircleLabels",e);break;case"circleMy":this.$store.dispatch("nedb/SetCurrentCircles",e);break;case"circleLog":this.$store.dispatch("nedb/SetFriendCircleLog",e);break;default:break}}}},R=y,W=(a("609d"),Object(h["a"])(R,N,O,!1,null,"1b3abfe8",null)),M=W.exports,E={name:"MainPage",data:function(){return{currentWechats:{},canRefresh:!0,timeOut:3,freshMap:["circleMy","groupLog","newFriend","qrCode","circleLog"],currentNavMap:["moreTools","takeLabels","friendsFilter","addFriendAuto"],refreshMap:{circleMy:"刷新朋友圈",circleLog:"查看定时任务日志",groupLog:"刷新定时任务日志",newFriend:"刷新好友申请",qrCode:"刷新二维码"}}},computed:{currentNav:function(){var e=this.$store.getters["currentNavs"][this.$route.name];return e}},components:{WechatsList:M},methods:{refresh:function(){var e=this,t=this.currentNav,a=this.$store.getters["currentWechats"][t],n=["newFriend","qrCode","circleMy"];if(n.indexOf(t)>=0&&!a)this.$message.warning("请先选中微信");else{switch(t){case"newFriend":this.$store.dispatch("websocket/PullFriendAddReqListTask",a),this.$message.success("刷新新的朋友列表");break;case"qrCode":this.$store.dispatch("websocket/PullWeChatQrCodeTask",a),this.$message.success("刷新二维码");break;case"circleMy":this.$store.dispatch("websocket/PullFriendCircleTask",{wechatId:a,friendId:a}),this.$message.success("刷新朋友圈");break;case"groupLog":this.$store.dispatch("websocket/GetTaskInfoList",{});break;case"circleLog":this.$store.commit("SET_TASK_TIME_DIALOG_CIRLCE",!0),this.$store.dispatch("websocket/GetTaskInfoList",{tasktype:2});break;default:this.$message.info("该页面无须刷新!");break}this.canRefresh=!1;var r=setInterval((function(){e.timeOut--}),1e3);setTimeout((function(){e.canRefresh=!0,clearInterval(r),e.timeOut=3}),3e3)}}}},_=E,w=(a("9bb9"),Object(h["a"])(_,S,k,!1,null,"3b575098",null)),F=w.exports,L={name:"App",data:function(){return{activeIndex:"/tools/new-friend"}},components:{HeaderPage:m,AsidePage:T,MainPage:F},computed:Object(o["a"])({},Object(i["b"])({token:"token"})),watch:{token:function(e){if(!e&&(this.$router.replace({name:"login"}),"electron"===this.$store.getters.currentMode)){var t=this.$loading({lock:!0,text:"正在退出",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){t.close()}),2e3),this.$ipcRenderer.send("operations","logout")}}}},A=L,D=(a("5c0b"),Object(h["a"])(A,r,s,!1,null,null,null)),U=D.exports,P=a("9483");Object(P["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var j=a("5c96"),H=a.n(j),G=(a("0fae"),a("2eba"),a("2ef0")),q=a.n(G),x=a("bc3a"),$=a.n(x),B=a("31bd"),K=a("4360"),J=(a("45fc"),a("d3b7"),a("8c4f"));n["default"].use(J["a"]);var Q=J["a"].prototype.push;J["a"].prototype.push=function(e){return Q.call(this,e).catch((function(e){return e}))};var V=[{path:"/",redirect:{path:"/conversation"}},{path:"/login",name:"login",components:{login:function(){return a.e("login").then(a.bind(null,"48ca"))}}},{path:"/conversation",name:"conversation",components:{main:function(){return a.e("conversation").then(a.bind(null,"6f04"))}},meta:{requireAuth:!0}},{path:"/friend-circle",name:"friendCircle",components:{main:function(){return a.e("conversation").then(a.bind(null,"3298"))}},meta:{requireAuth:!0}},{path:"/group-assistant",name:"groupAssistant",components:{main:function(){return a.e("conversation").then(a.bind(null,"cd8b"))}},meta:{requireAuth:!0}},{path:"/tools",name:"tools",components:{main:function(){return a.e("conversation").then(a.bind(null,"05a6"))}},meta:{requireAuth:!0}}],z=new J["a"]({base:"",mode:"hash",routes:V,scrollBehavior:function(e,t,a){return a||{x:0,y:0}}});z.beforeEach((function(e,t,a){var n=K["a"].getters.token;e.matched.some((function(e){return e.meta.requireAuth}))?n?a():a({path:"/login"}):a()})),z.beforeResolve((function(e,t,a){a()})),z.onError((function(e){}));var Y=z,Z=(a("99af"),a("fb6a"),a("a9e3"),a("25f0"),a("466d"),a("53ca")),X=a("5a0c"),ee=a.n(X),te=function(){var e=(new Date).getTime(),t=new Date(e),a=t.getHours(),n=t.getMinutes(),r=t.getSeconds(),s=t.getMilliseconds();return e=e-60*a*60*1e3-60*n*1e3-1e3*r-s,e},ae=function(e){return e=e.toString(),e?(17===e.length&&(e=e.substr(0,13)),13===e.length?ee()(Number(e)).format("YYYY-MM-DD HH:mm:ss"):ee.a.unix(Number(e)).format("YYYY-MM-DD HH:mm:ss")):"-"},ne=function(e){var t=Number(e),a=new Date(t),n=a.getHours(),r=a.getMinutes();if(e>te)return r<10?n+":0"+r:n+":"+r;if(e>te-864e5)return"昨天";var s=a.getMonth()+1,o=a.getDate();return"".concat(s,"月").concat(o,"日")},re=function(e){var t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",r=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",s=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),i=a+n+r+s+o;return i},se=function(e){return e=e.toString(),e.substr(0,3)+"****"+e.substr(7,11)},oe=function(e){if(e)return e.toString().replace(/\s/g,"").replace(/(.{4})/g,"$1 ")},ie=function(e){var t=(e||0).toString(),a="";while(t.length>3)a=","+t.slice(-3)+a,t=t.slice(0,t.length-3);return t&&(a=t+a),a},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=parseFloat(e);if(isNaN(a))return!1;a=Math.round(e*Math.pow(10,t))/Math.pow(10,t);var n=a.toString(),r=n.indexOf(".");r<0&&(r=n.length,n+=".");while(n.length<=r+t)n+="0";return n},de=function(e){var t=Object(Z["a"])(e);if("number"===t||"string"===t){e=parseInt(e);var a=Math.floor(e/3600);e-=3600*a;var n=Math.floor(e/60);return e-=60*n,a+":"+("0"+n).slice(-2)+":"+("0"+e).slice(-2)}return"0:00:00"},ue=function(e){var t={circleSend:"发朋友圈",circleMy:"我的朋友圈",circleLog:"朋友圈日志",groupSend:"群发助手",groupLog:"群发日志",newFriend:"新的朋友",addFriend:"添加好友",addFriendAuto:"批量加好友",searchPhones:"号码查询",autoHi:"自动打招呼",qrCode:"微信二维码",autoTask:"自动任务",autoReply:"自动回复",clearFans:"清理僵尸粉",phoneManagement:"手机管理",moreTools:"更多功能",takeLabels:"批量打标签",friendsFilter:"好友筛选"};return t[e]?t[e]:e},le=function(e){if(e){var t=/&sendusername=.+?&/,a=e.match(t)[0];return a.replace("&sendusername=","").replace("&","")}},he=function(e,t){var a,n=Object(I["a"])(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.LabelId===Number(e))return r.LabelName}}catch(s){n.e(s)}finally{n.f()}return e},fe=function(e){var t=e;try{return t=JSON.parse(e).name,t}catch(a){return t.replace(/.*\//,"")}},me=function(e){var t={1:"通过搜索QQ号添加",1000001:"对方通过搜索QQ号添加",3:"通过搜索微信号添加",1000003:"对方通过搜索微信号添加",4:"来自QQ好友",8:"通过群聊添加",1000008:"对方通过群聊添加",1000014:"对方通过群聊添加",10:"通过手机通讯录添加",1000010:"对方通过手机通讯录添加",1000013:"对方通过手机通讯录添加",15:"通过搜索手机号添加",1000015:"对方通过搜索手机号添加",17:"通过名片分享添加",1000017:"对方通过名片分享添加",18:"通过附近的人添加",1000018:"对方通过附近的人添加",22:"通过摇一摇添加",1000022:"对方通过摇一摇添加",25:"通过漂流瓶添加",1000025:"对方通过漂流瓶添加",30:"通过扫一扫添加",1000030:"对方通过扫一扫添加",34:"公众号",48:"雷达",58:"通过Google联系人添加",76:"通过LinkedIn添加"};return e&&t[e]?t[e]:"未知"},Ce={timeFilter:ae,transformTime:ne,transformTime2Minute:re,formatPhone:se,formatBank:oe,toThousands:ie,formatFloat:ce,realFormatSecond:de,titleFilter:ue,hbUrlFilter:le,labelFilter:he,getFileName:fe,getFriendSource:me};if(Object(B["sync"])(K["a"],Y),"electron"===Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_CURRENTMODE){var pe=window.require("electron"),Ie=pe.ipcRenderer,ge=pe.remote;K["a"].commit("SET_CURRENT_MODE","electron"),n["default"].prototype.$ipcRenderer=Ie,n["default"].prototype.$remote=ge}n["default"].use(H.a),n["default"].prototype.$axios=$.a,n["default"].prototype._=q.a,Object.keys(Ce).forEach((function(e){n["default"].filter(e,Ce[e])})),n["default"].config.productionTip=!1,new n["default"]({router:Y,store:K["a"],render:function(e){return e(U)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var n=a("9c0c"),r=a.n(n);r.a},"609d":function(e,t,a){"use strict";var n=a("4604"),r=a.n(n);r.a},8989:function(e,t,a){},9393:function(e,t,a){"use strict";a("a15b"),a("d81d"),a("fb6a"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("1276");function n(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))}function r(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}t["a"]={encode:n,decode:r}},"9bb9":function(e,t,a){"use strict";var n=a("d7c9"),r=a.n(n);r.a},"9c0c":function(e,t,a){},b9c7:function(e,t,a){},c818:function(e,t,a){"use strict";a.r(t);var n=a("2b0e"),r={indexedDB:window.indexedDB||window.webkitindexedDB||window.msIndexedDB||window.mozIndexedDB,qrCodes:{},newFriends:{}},s={indexedDB:function(e){return e.indexedDB},qrCodes:function(e){return e.qrCodes},newFriends:function(e){return e.newFriends}},o={SetQrCodes:function(e){var t=e.state,a=e.commit,n=t.indexedDB,r=n.open("qrCode",1);return r.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("qrCode")||t.createObjectStore("qrCode",{keyPath:"WeChatId"})},r.onsuccess=function(e){var t=e.target.result,n=t.transaction(["qrCode"],"readonly"),r=n.objectStore("qrCode");r.openCursor().onsuccess=function(e){var t=e.target.result;t&&(a("SET_QR_CODES",t),t.continue())}},r.onerror=function(e){},{}},UpdateOrAddQrCode:function(e,t){var a=e.state,n=e.dispatch,r=a.indexedDB,s=r.open("qrCode",1);s.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("qrCode")||t.createObjectStore("qrCode",{keyPath:"WeChatId"})},s.onsuccess=function(e){var a=e.target.result,r=a.transaction("qrCode","readwrite"),s=r.objectStore("qrCode"),o=s.get(t.WeChatId);o.onsuccess=function(e){var a=e.target.result;if(a){a.QrCodeUrl=t.QrCodeUrl,a.created=t.created;var r=s.put(a);r.onsuccess=function(e){n("SetQrCodes")},r.onerror=function(e){}}else{var o=s.add(t);o.onsuccess=function(e){n("SetQrCodes")},o.onerror=function(e){}}},o.onerror=function(e){}},s.onerror=function(e){}},SetNewFriends:function(e){var t=e.state,a=e.commit,n=t.indexedDB,r=n.open("newFriends",1);return r.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("newFriends")||t.createObjectStore("newFriends",{keyPath:"WeChatId"})},r.onsuccess=function(e){var t=e.target.result,n=t.transaction(["newFriends"],"readonly"),r=n.objectStore("newFriends");r.openCursor().onsuccess=function(e){var t=e.target.result;t&&(a("SET_NEW_FRIENDS",t),t.continue())}},r.onerror=function(e){},{}},UpdateOrAddNewFriends:function(e,t){var a=e.state,n=e.dispatch,r=a.indexedDB,s=r.open("newFriends",1);s.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("newFriends")||t.createObjectStore("newFriends",{keyPath:"WeChatId"})},s.onsuccess=function(e){var a=e.target.result,r=a.transaction("newFriends","readwrite"),s=r.objectStore("newFriends"),o=s.get(t.WeChatId);o.onsuccess=function(e){var a=e.target.result;if(a){a.Requests=t.Requests,a.created=t.created;var r=s.put(a);r.onsuccess=function(e){n("SetNewFriends")},r.onerror=function(e){}}else{var o=s.add(t);o.onsuccess=function(e){n("SetNewFriends")},o.onerror=function(e){}}},o.onerror=function(e){}},s.onerror=function(e){}}},i={SET_QR_CODES:function(e,t){n["default"].set(e.qrCodes,t.key,t.value)},SET_NEW_FRIENDS:function(e,t){n["default"].set(e.newFriends,t.key,t.value)}};t["default"]={namespaced:!0,state:r,getters:s,actions:o,mutations:i}},cdf3:function(e,t,a){e.exports=a.p+"static/img/jvchat.png"},ce79:function(e,t,a){"use strict";a.r(t);a("99af"),a("7db0"),a("c975"),a("d81d"),a("fb6a"),a("a434"),a("a9e3"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("1276");var n=a("b85c"),r=a("2b0e"),s=a("2c68"),o=a("9393"),i={qrCode:{},newFriends:[],addFriends:[],zombies:[],autoTaskConfig:{},autoReply:[],autoAddFriendLog:[],phonesList:[],autoHiConfig:{Content:"",ContentType:"text"},searchResults:[],currentCircles:[],friendCircleLog:[],circleFriends:[],circleLabels:[],groupSendLog:[],groupSendFriends:[],groupSendRooms:[],groupSendLabels:[],conversations:[],friends:[],friendsAll:[],labels:[],chatRooms:[],chatRoomsAll:[],newMessageNotice:{},members:[],conversationQrCode:{},chatRoomQrCode:{},conversationCircles:[],friendsMap:{},chatRoomsMap:{},luckMoneyMap:{},myReply:[],currentChats:[]},c={indexedDB:function(e){return e.indexedDB},qrCode:function(e){return e.qrCode},newFriends:function(e){return e.newFriends},addFriends:function(e){return e.addFriends},zombies:function(e){return e.zombies},autoTaskConfig:function(e){return e.autoTaskConfig},autoReply:function(e){return e.autoReply},autoAddFriendLog:function(e){return e.autoAddFriendLog},phonesList:function(e){return e.phonesList},autoHiConfig:function(e){return e.autoHiConfig},searchResults:function(e){return e.searchResults},currentCircles:function(e){return e.currentCircles},circleFriends:function(e){return e.circleFriends},circleLabels:function(e){return e.circleLabels},friendCircleLog:function(e){return e.friendCircleLog},groupSendLog:function(e){return e.groupSendLog},groupSendFriends:function(e){return e.groupSendFriends},groupSendRooms:function(e){return e.groupSendRooms},groupSendLabels:function(e){return e.groupSendLabels},conversations:function(e){return e.conversations},friends:function(e){return e.friends},friendsAll:function(e){return e.friendsAll},chatRooms:function(e){return e.chatRooms},chatRoomsAll:function(e){return e.chatRoomsAll},newMessageNotice:function(e){return e.newMessageNotice},friendsMap:function(e){return e.friendsMap},chatRoomsMap:function(e){return e.chatRoomsMap},luckMoneyMap:function(e){return e.luckMoneyMap},myReply:function(e){return e.myReply},currentChats:function(e){return e.currentChats},labels:function(e){return e.labels},members:function(e){return e.members},conversationQrCode:function(e){return e.conversationQrCode},chatRoomQrCode:function(e){return e.chatRoomQrCode},conversationCircles:function(e){return e.conversationCircles}},d={SetNewFriends:function(e,t){var a=e.commit;s["a"].newFriends.findOne({WeChatId:t},(function(e,t){e||a("SET_NEW_FRIENDS",t||[])}))},UpdateOrAddNewFriends:function(e,t){var a=e.dispatch;0!==t.Requests.length&&s["a"].newFriends.findOne({WeChatId:t.WeChatId},(function(e,r){if(!e)if(r){var o,i=r.Requests,c=t.Requests,d=[],u=Object(n["a"])(c);try{for(u.s();!(o=u.n()).done;){var l=o.value;d.push(l.FriendId)}}catch(e){u.e(e)}finally{u.f()}var h,f=Object(n["a"])(i);try{for(f.s();!(h=f.n()).done;){var m=h.value;-1===d.indexOf(m.FriendId)&&c.push(m)}}catch(e){f.e(e)}finally{f.f()}s["a"].newFriends.update({WeChatId:t.WeChatId},{$set:{Requests:c}},{},(function(e,n){e||a("SetNewFriends",t.WeChatId)}))}else s["a"].newFriends.insert(t,(function(e,n){e||a("SetNewFriends",t.WeChatId)}))}))},UpdateNewFriendsByOne:function(e,t){var a=e.rootGetters,r=e.dispatch;s["a"].newFriends.findOne({WeChatId:t.WeChatId},(function(e,o){if(!e)if(o){var i,c=o.Requests,d=[],u=Object(n["a"])(c);try{for(u.s();!(i=u.n()).done;){var l=i.value;d.push(l.FriendId)}}catch(e){u.e(e)}finally{u.f()}if(-1===d.indexOf(t.FriendId))c.push(t);else{var h=d.indexOf(t.FriendId);c.splice(h,1,t)}s["a"].newFriends.update({WeChatId:t.WeChatId},{$set:{Requests:c}},{},(function(e,n){e||t.WeChatId===a["currentWechats"]["addFriend"]&&r("SetNewFriends",t.WeChatId)}))}else{var f={userId:a.userId,ModifyTime:t.ReqTime,Requests:[t],WeChatId:t.WeChatId};s["a"].newFriends.insert(f,(function(e,n){e||t.WeChatId===a["currentWechats"]["addFriend"]&&r("SetNewFriends",t.WeChatId)}))}}))},SetAddFriends:function(e,t){var a=e.rootGetters,n=e.commit;s["a"].addFriendTask.find({userId:a.userId,WeChatId:t}).sort({TaskId:-1}).exec((function(e,t){!e&&t&&n("SET_ADD_FRIENDS",t)}))},AddOrUpdateAddFriends:function(e,t){var a=e.dispatch;s["a"].addFriendTask.findOne({TaskId:t.TaskId},(function(e,n){e||(n?s["a"].addFriendTask.update({TaskId:t.TaskId},{$set:{result:t.result}},{},(function(e,n){e||a("SetAddFriends",t.WeChatId)})):s["a"].addFriendTask.insert(t,(function(e,n){e||a("SetAddFriends",t.WeChatId)})))}))},SetZombies:function(e,t){var a=e.rootGetters,n=e.commit;s["a"].zombies.find({userId:a.userId,WeChatId:t}).sort({TaskId:-1}).exec((function(e,t){!e&&t&&n("SET_ZOMBIES",t)}))},AddOrUpdateZombies:function(e,t){var a=e.rootGetters,n=e.dispatch;t.userId=a.userId,s["a"].zombies.insert(t,(function(e,a){e||n("SetZombies",t.WeChatId)}))},SetQrCode:function(e,t){var a=e.commit;s["a"].qrcode.findOne({WeChatId:t,ChatRoomId:-1},(function(e,t){e||a("SET_QR_CODE",t||{WeChatId:"",ChatRoomId:-1,QrCodeUrl:"",ModifyTime:0})}))},UpdateQrCode:function(e,t){var a=e.rootGetters,n=e.dispatch;t.ModifyTime=(new Date).getTime(),s["a"].qrcode.update({WeChatId:t.WeChatId,ChatRoomId:t.ChatRoomId},{$set:{WeChatId:t.WeChatId,QrCodeUrl:t.QrCodeUrl,ChatRoomId:t.ChatRoomId,ModifyTime:t.ModifyTime}},{upsert:!0},(function(e,r){if(!e){var s=a["conversation/currentWeChatId"],o=a["conversation/currentFriends"][s];if(o&&o.UserName===t.ChatRoomId&&n("SetChatRoomQrCode",o),-1===t.ChatRoomId){var i=a["currentWechats"]["qrCode"];t.WeChatId===i&&n("SetQrCode",i),s===t.WeChatId&&n("SetConversationQrCode",s)}}}))},SetAutoReply:function(e){var t=e.rootGetters,a=e.commit;s["a"].autoReply.find({userId:t.userId}).sort({modifyTime:-1}).exec((function(e,t){e||t&&a("SET_AUTP_REPLY",t)}))},UpdateOrAddAutoReply:function(e,t){var a=e.rootGetters,n=e.dispatch;t.userId=a.userId,t.modifyTime=(new Date).getTime(),s["a"].autoReply.update({userId:a.userId,keyWord:t.keyWord},t,{upsert:!0},(function(e,t){e||n("SetAutoReply")}))},DeleteAutoReply:function(e,t){e.rootGetters;var a=e.dispatch;s["a"].autoReply.remove({_id:t._id},{multi:!1},(function(e,t){e||a("SetAutoReply")}))},SetAutoHiConfig:function(e){var t=e.rootGetters,a=e.commit;s["a"].autoHiConfig.findOne({userId:t.userId},(function(e,t){e||t&&a("SET_AUTP_HI_CONFIG",t)}))},UpdateOrAddAutoHiConfig:function(e,t){var a=e.rootGetters,n=e.dispatch;t.userId=a.userId,s["a"].autoHiConfig.update({userId:a.userId},t,{upsert:!0},(function(e,t){e||n("SetAutoHiConfig")}))},AutoHi:function(e,t){var a=e.getters,n=e.dispatch;if("System"===t.ContentType&&t.Content.indexOf("5Y+v5Lul5byA5aeL6IGK5aSp5LqG")>=0||t.Content.indexOf("5oiR6YCa6L+H5LqG5L2g55qE5pyL5Y+L6aqM6K+B6K+35rGC77yM546w5Zyo5oiR5Lus5Y+v5Lul5byA5aeL6IGK5aSp5LqG")>=0){var r=a.autoHiConfig;if(r.Content){var s={WeChatId:t.WeChatId,FriendId:t.FriendId,ContentType:"Text",Content:r.Content};n("websocket/TalkToFriendTask",s,{root:!0})}}},AutoReply:function(e,t){var a=e.getters,r=e.dispatch,s=a.autoReply;if("Text"===t.ContentType&&s.length>0){var i,c={},d=Object(n["a"])(s);try{for(d.s();!(i=d.n()).done;){var u=i.value;c[u.keyWord]=u}}catch(f){d.e(f)}finally{d.f()}var l=o["a"].decode(t.Content);if(c[l]){var h={WeChatId:t.WeChatId,FriendId:t.FriendId,ContentType:c[l].msgType,Content:c[l].replyMsg};r("websocket/TalkToFriendTask",h,{root:!0})}}},FindFriendsByConditions:function(e,t){var a=e.rootGetters,n=e.commit,r={userId:a.userId};t.Memo&&(r.Memo={$regex:new RegExp(".*"+t.Memo+".*")}),t.FriendNo&&(r.FriendNo={$regex:new RegExp(".*"+t.FriendNo+".*")}),t.FriendNick&&(r.FriendNick={$regex:new RegExp(".*"+t.FriendNick+".*")}),s["a"].friends.find(r,(function(e,t){e||n("SET_SEARCH_CONDITIONS",t||[])}))},SetCurrentCircles:function(e,t){var a=e.commit;s["a"].circles.findOne({WeChatId:t,FriendId:t},(function(e,t){e||a("SET_CURRENT_CIRCLES",t&&t.Circles?t.Circles:[])}))},UpdateOrAddCircles:function(e,t){var a=e.rootGetters,n=e.dispatch,r=t.Circles,o=t.WeChatId,i=r[0].WeChatId,c=a["currentWechats"]["circleMy"],d=a["conversation/currentFriends"],u=a["conversation/currentWeChatId"],l=d[u];s["a"].circles.findOne({WeChatId:o,FriendId:i},(function(e,t){if(!e)if(t){var a=t.Circles,d=r.concat(a),u={},h=[];d.map((function(e,t){u[e.CircleId]||(h.push(e),u[e.CircleId]=!0)})),s["a"].circles.update({WeChatId:o,FriendId:i},{$set:{Circles:h}},{},(function(e,t){e||(o===i&&o===c&&n("SetCurrentCircles",o),o!==i&&"{}"!==JSON.stringify(l)&&o===l.WeChatId&&i===l.FriendId&&n("SetConversationCircles",l))}))}else s["a"].circles.insert({WeChatId:o,FriendId:i,Circles:r},(function(e,t){e||(o===i&&o===c&&n("SetCurrentCircles",o),o!==i&&"{}"!==JSON.stringify(l)&&o===l.WeChatId&&i===l.FriendId&&n("SetConversationCircles",l))}))}))},UpdateCirclesImgs:function(e,t){e.rootGetters;var a=e.dispatch,n=t.Circle,r=t.WeChatId;a("UpdateOrAddCircles",{WeChatId:r,Circles:[n]})},RemoveCircles:function(e,t){var a=e.rootGetters,r=e.dispatch,o=t.WeChatId,i=a["currentWechats"]["circleMy"];s["a"].circles.findOne({WeChatId:o,FriendId:o},(function(e,a){if(!e&&a&&a.Circles){var c,d=a.Circles,u=0,l=!1,h=Object(n["a"])(d);try{for(h.s();!(c=h.n()).done;){var f=c.value;if(f.CircleId===t.CircleId){l=!0;break}u++}}catch(e){h.e(e)}finally{h.f()}if(!l)return;d.splice(u,1),s["a"].circles.update({WeChatId:o,FriendId:o},{$set:{Circles:d}},{},(function(e,t){e||o===i&&r("SetCurrentCircles",o)}))}}))},AddCircleTask:function(e,t){var a=e.rootGetters,n=e.dispatch;t.userId=a.userId,t.result=0;var r=a["currentWechats"]["circleLog"];s["a"].circleTask.insert(t,(function(e,a){e||t.WeChatId===r&&n("SetFriendCircleLog",r)}))},UpdateCircleTask:function(e,t){var a=e.rootGetters,n=e.dispatch,r=t.Success?1:2,o=a["currentWechats"]["circleLog"];s["a"].circleTask.update({TaskId:t.TaskId},{$set:{result:r}},{},(function(e,a){e||t.WeChatId===o&&n("SetFriendCircleLog",o)}))},SetFriendCircleLog:function(e,t){var a=e.commit,n=e.rootGetters;s["a"].circleTask.find({userId:n.userId,WeChatId:t},(function(e,t){e||a("SET_FRIEND_CIRCLE_LOG",t)}))},SetCircleFriends:function(e,t){var a=e.commit;s["a"].friends.find({WeChatId:t},(function(e,t){e||a("SET_CIRCLE_FRIENDS",t||[])}))},SetCircleLabels:function(e,t){var a=e.commit;s["a"].labels.findOne({WeChatId:t},(function(e,t){e||t&&a("SET_CIRCLE_LABELS",t)}))},SetGroupSendFriends:function(e,t){var a=e.commit;s["a"].friends.find({WeChatId:t},(function(e,t){e||a("SET_GROUP_SEND_FRIENDS",t||[])}))},SetGroupSendRooms:function(e,t){var a=e.commit;s["a"].chatRooms.find({WeChatId:t},(function(e,t){e||a("SET_GROUP_SEND_ROOMS",t||[])}))},AddGroupSendTask2Nedb:function(e,t){var a=e.rootGetters,n=e.dispatch;t.userId=a.userId,t.result=0;var r=a["currentWechats"]["groupLog"];s["a"].groupSendTask.insert(t,(function(e,a){e||t.WeChatId===r&&n("SetGroupSendLog",t.WeChatId)}))},UpdateGroupSendTask:function(e,t){var a=e.rootGetters,n=e.dispatch,r=(e.commit,t.TaskId),o=t.Success?1:2,i=t.WeChatId,c=a["currentWechats"]["groupLog"];s["a"].groupSendTask.update({TaskId:r},{$set:{result:o}},{},(function(e,t){e||i===c&&n("SetGroupSendLog",i)}))},SetGroupSendLog:function(e,t){var a=e.commit,n=e.rootGetters;s["a"].groupSendTask.find({userId:n.userId,WeChatId:t},(function(e,t){e||a("SET_GROUP_SEND_LOG",t)}))},SetGroupSendLabels:function(e,t){var a=e.commit;s["a"].labels.findOne({WeChatId:t},(function(e,t){e||t&&a("SET_GROUP_SEND_LABELS",t)}))},AddLabel:function(e,t){var a=e.dispatch,r=t.Label,o=t.WeChatId,i={LabelId:r.LabelId,LabelName:r.LabelName};s["a"].labels.findOne({WeChatId:o},(function(e,t){if(!e){var r={Labels:[i],WeChatId:o};if(t){var s,c=t.Labels,d=!0,u=Object(n["a"])(c);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(l.LabelId===i.LabelId){l.LabelName=i.LabelName,d=!1;break}}}catch(e){u.e(e)}finally{u.f()}d&&c.push(i),r.Labels=c}a("UpdateOrAddLabels",r)}}))},DeleteLabel:function(e,t){var a=e.dispatch,r=t.WeChatId;s["a"].labels.findOne({WeChatId:r},(function(e,s){if(!e&&s){var o,i=[],c=Object(n["a"])(s.Labels);try{for(c.s();!(o=c.n()).done;){var d=o.value;d.LabelId!==t.LabelId&&i.push(d)}}catch(e){c.e(e)}finally{c.f()}var u={Labels:i,WeChatId:r};a("UpdateOrAddLabels",u)}}))},SetLabels:function(e,t){var a=e.commit;s["a"].labels.findOne({WeChatId:t},(function(e,t){e||t&&a("SET_LABELS",t)}))},UpdateOrAddLabels:function(e,t){e.rootGetters;var a=e.dispatch,n=t.WeChatId;s["a"].labels.update({WeChatId:t.WeChatId},t,{upsert:!0},(function(e,t){e||a("SetLabels",n)}))},SetConversations:function(e,t){var a=e.commit;s["a"].conversations.findOne({WeChatId:t},(function(e,t){e||a("SET_CONVERSATIONS",t&&t.Convers?t.Convers:[])}))},UpdateOrAddConversations:function(e,t){var a=e.rootGetters,r=e.dispatch,o=t.Convers,i=t.WeChatId,c=a["conversation/currentWeChatId"];s["a"].conversations.findOne({WeChatId:i},(function(e,t){if(!e)if(t){var a,d=t.Convers,u=[],l=Object(n["a"])(o);try{for(l.s();!(a=l.n()).done;){var h=a.value;u.push(h.UserName)}}catch(e){l.e(e)}finally{l.f()}var f,m=Object(n["a"])(d);try{for(m.s();!(f=m.n()).done;){var C=f.value;-1===u.indexOf(C.UserName)&&o.push(C)}}catch(e){m.e(e)}finally{m.f()}s["a"].conversations.update({WeChatId:i},{$set:{Convers:o}},{},(function(e,t){e||(i===c&&r("SetConversations",i),r("UpdateNewMessageNotice",i))}))}else s["a"].conversations.insert({WeChatId:i,Convers:o},(function(e,t){e||(i===c&&r("SetConversations",i),r("UpdateNewMessageNotice",i))}))}))},UpdateOrAddConversationsByTalk:function(e,t){var a=e.dispatch,r=t.WeChatId,i="",c={UserName:t.FriendId,Digest:"",MsgCnt:1,UnreadCnt:1,UpdateTime:t.CreateTime};switch(t.IsSend&&(c.IsSend=!0),t.FriendId.indexOf("@chatroom")>0&&(c.DigestUser=o["a"].decode(t.Content).split(":")[0]),t.ContentType){case"Text":i=o["a"].decode(t.Content),t.FriendId.indexOf("@chatroom")>0&&(i=unescape(escape(i.replace(/.*?:/,"")).replace("%0A","%20")).replace(" ",""));break;case"Picture":case 2:i="[图片]";break;case"Voice":case 3:i="[语音]";break;case"Video":case 4:i="[视频]";break;case"System":case 5:i="[系统消息]";break;case"Link":case 6:i="[链接]";break;case"LinkExt":case 7:i="[扩展的链接消息]";break;case"File":case 8:i="[文件]";break;case"NameCard":case 9:i="[名片]";break;case"Location":case 10:i="[位置消息]";break;case"LuckyMoney":case 11:i="[链接]";break;case"MoneyTrans":case 12:i="[红包]";break;case"WeApp":case 13:i="[小程序]";break;case"Emoji":case 14:i="[Emoji]";break;case"RoomManage":case 15:i="[群管理消息]";break;case"Sys_LuckyMoney":case 16:i="[红包系统消息]";break;case"RoomSystem":case 17:i="[群系统消息]";break;default:i="[不支持的消息]";break}c.Digest=i,s["a"].conversations.findOne({WeChatId:r},(function(e,s){if(!e)if(s){var o,i=s.Convers||[],d=!1,u={},l=Object(n["a"])(i);try{for(l.s();!(o=l.n()).done;){var h=o.value;if(h.UserName===t.FriendId){u=h,d=!0;break}}}catch(e){l.e(e)}finally{l.f()}d&&(c.MsgCnt=u.MsgCnt?u.MsgCnt+1:1,c.UnreadCnt=u.UnreadCnt?u.UnreadCnt+1:1);var f={WeChatId:r,Convers:[c]};a("UpdateOrAddConversations",f)}else{var m={WeChatId:r,Convers:[c]};a("UpdateOrAddConversations",m)}}))},RemoveAllConversationsByWechatId:function(e,t){var a=e.dispatch;s["a"].conversations.remove({WeChatId:t},{multi:!0},(function(e,n){e||a("SetConversations",t)}))},RemovConversationsByFriendId:function(e,t){var a=e.rootGetters,r=e.dispatch,o=t.WeChatId,i=a["conversation/currentWeChatId"];s["a"].conversations.findOne({WeChatId:o},(function(e,a){if(!e&&a){var c,d=[],u=Object(n["a"])(a.Convers);try{for(u.s();!(c=u.n()).done;){var l=c.value;l.UserName!==t.RoomId&&d.push(l)}}catch(e){u.e(e)}finally{u.f()}s["a"].conversations.update({WeChatId:o},{$set:{Convers:d}},{},(function(e,t){e||(o===i&&r("SetConversations",o),r("UpdateNewMessageNotice",o))}))}}))},SetUnreadCnt:function(e,t){var a=e.rootGetters,r=e.dispatch,o=t.WeChatId,i=a["conversation/currentWeChatId"];s["a"].conversations.findOne({WeChatId:o},(function(e,a){if(!e&&a){var c,d=a.Convers,u=Object(n["a"])(d);try{for(u.s();!(c=u.n()).done;){var l=c.value;if(l.UserName===t.FriendId){l.UnreadCnt=0;break}}}catch(e){u.e(e)}finally{u.f()}s["a"].conversations.update({WeChatId:o},{$set:{Convers:d}},{},(function(e,t){e||(o===i&&r("SetConversations",o),r("UpdateNewMessageNotice",o))}))}}))},SetNewMessageNotice:function(e,t){var a=e.commit;s["a"].conversations.find({},(function(e,t){if(e)return{};var r,s={},o=Object(n["a"])(t);try{for(o.s();!(r=o.n()).done;){var i,c=r.value,d=0,u=Object(n["a"])(c.Convers);try{for(u.s();!(i=u.n()).done;){var l=i.value;l.UnreadCnt&&(d+=l.UnreadCnt)}}catch(e){u.e(e)}finally{u.f()}s[c.WeChatId]=d}}catch(e){o.e(e)}finally{o.f()}a("SET_NEW_MESSAGE_NOTICE",s)}))},UpdateNewMessageNotice:function(e,t){var a=e.commit;s["a"].conversations.findOne({WeChatId:t},(function(e,t){if(!e&&t){var r,s={},o=0,i=Object(n["a"])(t.Convers);try{for(i.s();!(r=i.n()).done;){var c=r.value;c.UnreadCnt&&(o+=c.UnreadCnt)}}catch(e){i.e(e)}finally{i.f()}s[t.WeChatId]=o,a("SET_NEW_MESSAGE_NOTICE",s)}}))},SetFriends:function(e,t){var a=e.commit;s["a"].friends.find({WeChatId:t},(function(e,t){e||a("SET_FRIENDS",t||[])}))},AddFriends:function(e,t){var a=e.rootGetters,n=e.dispatch,r=t[0]?t[0].WeChatId:"";s["a"].friends.insert(t,(function(e,t){e||(n("SetFriendsMap"),r===a["conversation/currentWeChatId"]&&n("SetFriends",r))}))},UpdateFriends:function(e,t){var a=e.rootGetters,n=e.dispatch;s["a"].friends.update({_id:t._id},t,{upsert:!1},(function(e,r){e||(n("SetFriendsMap"),t.WeChatId===a["conversation/currentWeChatId"]&&n("SetFriends",t.WeChatId))}))},UpdateFriendsByOne:function(e,t){var a=e.rootGetters,n=e.dispatch;s["a"].friends.update({userId:a.userId,FriendId:t.FriendId,WeChatId:t.WeChatId},t,{upsert:!0},(function(e,r){e||t.WeChatId===a["conversation/currentWeChatId"]&&n("SetFriends",t.WeChatId)}))},RemoveAllFriensByWechatId:function(e,t){var a=e.dispatch;s["a"].friends.remove({WeChatId:t},{multi:!0},(function(e,n){e||a("SetFriends",t)}))},RemoveFriend:function(e,t){var a=e.rootGetters,n=e.dispatch;s["a"].friends.remove({userId:a.userId,WeChatId:t.WeChatId,FriendId:t.FriendId},{},(function(e,a){e||n("SetFriends",t.WeChatId)}))},SetChatRooms:function(e,t){var a=e.commit;s["a"].chatRooms.find({WeChatId:t},(function(e,t){e||a("SET_CHAT_ROOMS",t||[])}))},AddOrUpdateChatRoom:function(e,t){var a=e.rootGetters,n=e.dispatch;t.ChatRoom&&s["a"].chatRooms.findOne({userId:a.userId,UserName:t.ChatRoom.UserName,WeChatId:t.WeChatId},(function(e,r){if(!e)if(r){var s=t.ChatRoom;s["userId"]=a.userId,s["WeChatId"]=t.WeChatId,s["_id"]=r._id,n("UpdateChatRoomById",s)}else n("AddChatRooms",t)}))},AddChatRooms:function(e,t){var a=e.rootGetters,r=e.dispatch,o=a.userId,i=t.WeChatId,c=[];if(t.ChatRooms){var d,u=Object(n["a"])(t.ChatRooms);try{for(u.s();!(d=u.n()).done;){var l=d.value;l.WeChatId=i,l.userId=o,c.push(l)}}catch(f){u.e(f)}finally{u.f()}}if(t.ChatRoom){var h=t.ChatRoom;h.WeChatId=i,h.userId=o,c.push(h)}0!==c.length&&s["a"].chatRooms.insert(c,(function(e,t){e||i===a["conversation/currentWeChatId"]&&r("SetChatRooms",i)}))},UpdateChatRoom:function(e,t){var a=e.rootGetters,n=e.dispatch;s["a"].chatRooms.update({userId:a.userId,WeChatId:t.WeChatId,UserName:t.UserName},{$set:t.sqlStr},{multi:!1},(function(e,r){e||t.WeChatId===a["conversation/currentWeChatId"]&&n("SetChatRooms",t.WeChatId)}))},UpdateChatRoomById:function(e,t){var a=e.rootGetters,n=e.dispatch;s["a"].chatRooms.update({_id:t._id},t,{multi:!1},(function(e,r){e||(t.WeChatId===a["conversation/currentWeChatId"]&&n("SetChatRooms",t.WeChatId),n("conversation/UpdateCurrentFriendsByRoom",t,{root:!0}))}))},RemoveChatRoom:function(e,t){var a=e.rootGetters,n=e.dispatch,r=e.commit,o=t.WeChatId;s["a"].chatRooms.remove({userId:a.userId,WeChatId:o,UserName:t.RoomId},{multi:!1},(function(e,s){if(!e){o===a["conversation/currentWeChatId"]&&n("SetChatRooms",o),n("RemovConversationsByFriendId",t);var i=a["conversation/currentFriends"],c=a["conversation/currentWeChatId"],d=i[c];if(o===c&&d&&t.RoomId===d.UserName){var u={wechatId:o,friend:{}};r("conversation/SET_CURRENT_FRIENDS",u,{root:!0})}}}))},RemoveAllRoomByWechatId:function(e,t){var a=e.dispatch,n=e.commit;s["a"].chatRooms.remove({WeChatId:t},{multi:!0},(function(e,r){if(!e){a("SetChatRooms",t);var s={wechatId:t,friend:{}};n("conversation/SET_CURRENT_FRIENDS",s,{root:!0})}}))},SetFriendsMap:function(e){var t=e.rootGetters,a=e.commit,r={};s["a"].friends.find({userId:t.userId},(function(e,t){var a,s=Object(n["a"])(t);try{for(s.s();!(a=s.n()).done;){var o=a.value;r[o.WeChatId]||(r[o.WeChatId]={}),r[o.WeChatId][o.FriendId]=o}}catch(e){s.e(e)}finally{s.f()}})),a("SET_FRIENDS_MAP",r)},SetChatRoomsMap:function(e){var t=e.rootGetters,a=e.commit,r={};s["a"].chatRooms.find({userId:t.userId},(function(e,t){var a,s=Object(n["a"])(t);try{for(s.s();!(a=s.n()).done;){var o=a.value;r[o.WeChatId]||(r[o.WeChatId]={}),r[o.WeChatId][o.UserName]=o}}catch(e){s.e(e)}finally{s.f()}})),a("SET_CHAT_ROOMS_MAP",r)},AddChats:function(e,t){var a=e.rootGetters,n=e.dispatch;t.userId=a.userId;var r=a["conversation/currentWeChatId"],o=a["conversation/currentFriends"],i=o[r],c="";i&&(c=i.FriendId||i.UserName),s["a"].chats.insert(t,(function(e,a){e||t.FriendId===c&&(n("SetCurrentChats",c),n("SetUnreadCnt",{WeChatId:r,FriendId:c}))}))},AddChatsByHistory:function(e,t){var a,r=e.rootGetters,o=e.dispatch,i=t.Messages,c=[],d=Object(n["a"])(i);try{for(d.s();!(a=d.n()).done;){var u=a.value;c.push(u)}}catch(C){d.e(C)}finally{d.f()}c.map((function(e){e.msgSvrId=e.MsgSvrId?e.MsgSvrId:e.MsgId,e.WeChatId=t.WeChatId,e.userId=r.userId}));var l=r["conversation/currentWeChatId"],h=r["conversation/currentFriends"],f=h[l],m="";f&&(m=f.FriendId||f.UserName),s["a"].chats.insert(c,(function(e,t){e||c[0].FriendId===m&&(o("SetCurrentChats",m),o("SetUnreadCnt",{WeChatId:l,FriendId:m}))}))},RemoveChatsByWxId:function(e,t){var a=e.rootGetters,n=e.dispatch;s["a"].chats.remove({userId:a.userId,WeChatId:t.WeChatId,FriendId:t.FriendId||t.UserName},{multi:!0},(function(e,a){!e&&a&&n("SetCurrentChats",t.WeChatId)}))},RemoveChatsByMsgId:function(e,t){var a=e.rootGetters,n=e.dispatch;s["a"].chats.remove({userId:a.userId,WeChatId:t.wechatId,MsgId:t.msgId.toString()},{multi:!0},(function(e,r){if(!e&&r){var s=a["conversation/currentWeChatId"];t.friendId===a["conversation/currentFriends"][s]&&n("SetCurrentChats",t.friendId)}}))},UpdateChats:function(e,t){var a=e.rootGetters,n=e.dispatch,r=(new Date).getTime(),o=a["conversation/currentWeChatId"],i=a["conversation/currentFriends"],c=i[o],d="";c&&(d=c.FriendId||c.UserName),s["a"].chats.update({MsgId:t.MsgId},{$set:{msgSvrId:t.MsgSvrId,CreateTime:t.CreateTime?t.CreateTime:r}},{},(function(e,a){!e&&a&&t.FriendId===d&&(n("SetCurrentChats",d),n("SetUnreadCnt",{WeChatId:o,FriendId:d}))}))},UpdateChatImgUrl:function(e,t){var a=e.rootGetters,n=e.dispatch,r=a["conversation/currentWeChatId"],i=a["conversation/currentFriends"],c=i[r],d="";c&&(d=c.FriendId||c.UserName),s["a"].chats.findOne({MsgId:t.MsgId},(function(e,a){if(a){var i=o["a"].decode(a.Content),c=',"Url":"'+o["a"].decode(t.Content)+'"}',u=i.replace(/\}$/,c);s["a"].chats.update({MsgId:t.MsgId},{$set:{Content:o["a"].encode(u)}},{},(function(e,a){e||t.FriendId===d&&(n("SetCurrentChats",d),n("SetUnreadCnt",{WeChatId:r,FriendId:d}))}))}}))},UpdateChatImgUrlByNotice:function(e,t){var a=e.rootGetters,n=e.dispatch,r=a["conversation/currentWeChatId"],i=a["conversation/currentFriends"],c=i[r],d="";c&&(d=c.FriendId||c.UserName),s["a"].chats.findOne({msgSvrId:t.MsgSvrId},(function(e,a){if(a){var r=o["a"].decode(a.Content),i=',"Url":"'+t.Url+'"}',c=r.replace(/\}$/,i);s["a"].chats.update({msgSvrId:t.MsgSvrId},{$set:{Content:o["a"].encode(c)}},{},(function(e,t){var r=a.FriendId||a.UserName;r===d&&n("SetCurrentChats",d)}))}}))},SetChatRevoked:function(e,t){var a=e.rootGetters;e.dispatch;s["a"].chats.update({userId:a.userId,WeChatId:t.WeChatId,msgSvrId:t.TaskId},{$set:{revoked:!0}},{},(function(e,t){}))},SetMyReply:function(e){var t=e.rootGetters,a=e.commit;s["a"].myReply.find({userId:t.userId}).sort({createTime:1}).exec((function(e,t){e||a("SET_MY_REPLY",t)}))},AddMyReply:function(e,t){var a=e.rootGetters,n=e.dispatch;t.userId=a.userId,s["a"].myReply.insert(t,(function(e,t){e||n("SetMyReply")}))},RemoveMyReply:function(e,t){var a=e.dispatch;s["a"].myReply.remove({_id:t},(function(e,t){e||a("SetMyReply")}))},SetCurrentChats:function(e,t){var a=e.rootGetters,n=(e.getters,e.commit);s["a"].chats.find({userId:a.userId,WeChatId:a["conversation/currentWeChatId"],FriendId:t}).sort({CreateTime:1}).exec((function(e,t){e||n("SET_CURRENT_CHATS",t)}))},AddMemoTask:function(e,t){var a=e.rootGetters;t.userId=a.userId,t.result=0,s["a"].memoTask.insert(t,(function(e,t){}))},UpdateMemoTask:function(e,t){e.rootGetters,e.dispatch;var a=t.Success?1:2;s["a"].memoTask.update({TaskId:t.TaskId},{$set:{result:a}},{},(function(e,t){}))},SetMembers:function(e,t){var a=e.commit,n=e.rootGetters;s["a"].chatRoomMembers.findOne({userId:n.userId,WeChatId:t},(function(e,t){e||a("SET_MEMBERS",t&&t.Members?t.Members:[])}))},RemoveMembersByWechatId:function(e,t){var a=e.dispatch,n=e.rootGetters;s["a"].chatRoomMembers.remove({userId:n.userId,WeChatId:t},{multi:!0},(function(e,r){if(!e){var s=n["conversation/currentWeChatId"];s===t&&a("SetMembers",t)}}))},AddOrUpdateChatRoomMembers:function(e,t){var a=e.dispatch,n=e.rootGetters,r=n["conversation/currentWeChatId"];s["a"].chatRoomMembers.findOne({userId:n.userId,WeChatId:t.WeChatId},(function(e,o){if(!e)if(o){var i=o.Members,c=t.Members,d=c.concat(i),u={},l=[];d.map((function(e,t){u[e.Wxid]||(l.push(e),u[e.Wxid]=!0)})),s["a"].chatRoomMembers.update({_id:o._id},{$set:{Members:l}},{upsert:!1},(function(e,n){e||n&&r===t.WeChatId&&a("SetMembers",t.WeChatId)}))}else t.userId=n.userId,s["a"].chatRoomMembers.insert(t,(function(e,n){e||r===t.WeChatId&&a("SetMembers",t.WeChatId)}))}))},SetConversationQrCode:function(e,t){var a=e.commit;s["a"].qrcode.findOne({WeChatId:t,ChatRoomId:-1},(function(e,t){e||a("SET_CONVERSATION_QR_CODE",t||{WeChatId:"",ChatRoomId:-1,QrCodeUrl:"",ModifyTime:0})}))},SetChatRoomQrCode:function(e,t){var a=e.commit;s["a"].qrcode.findOne({WeChatId:t.WeChatId,ChatRoomId:t.UserName},(function(e,t){e||a("SET_CHAT_ROOM_QR_CODE",t||{WeChatId:"",ChatRoomId:-1,QrCodeUrl:"",ModifyTime:0})}))},AddChatRoomTask:function(e,t){var a=e.rootGetters;t.userId=a.userId,t.result=0,s["a"].chatRoomTask.insert(t,(function(e,t){}))},UpdateChatRoomTask:function(e,t){e.rootGetters,e.dispatch;var a=t.Success?1:2;s["a"].chatRoomTask.update({TaskId:t.TaskId},{$set:{result:a}},{},(function(e,t){}))},SetConversationCircles:function(e,t){var a=e.commit;s["a"].circles.findOne({WeChatId:t.WeChatId,FriendId:t.FriendId},(function(e,t){e||a("SET_CONVERSATION_CIRCLES",t&&t.Circles?t.Circles:[])}))},QueryUrl:function(e,t){var a=this,n=e.rootGetters,r=e.dispatch,o=e.commit,i=t.msgSvrId?t.msgSvrId:"",c=t.Content.Md5?t.Content.Md5:"";s["a"].chatDetail.findOne({userId:n.userId,msgSvrId:i,md5:c},(function(e,n){e||(n&&n.url?(o("conversation/SET_URL",n.url,{root:!0}),a.SetCurrentUrl(n.url)):r("websocket/RequestTalkDetailTask",t,{root:!0}))}))},QueryLastChat:function(e,t){var a=e.rootGetters,n=e.dispatch,r=t.UserName||t.FriendId;s["a"].chats.findOne({userId:a.userId,WeChatId:t.WeChatId,FriendId:r}).sort({CreateTime:-1}).exec((function(e,a){if(!e){var s=0,o=0;a&&a.CreateTime&&(s=Number(a.CreateTime)+10);var i={wechatId:t.WeChatId,friendId:r,startTime:s,endTime:o};n("websocket/TriggerHistoryMsgPushTask",i,{root:!0})}}))},SetLuckMoneyMap:function(e){var t=e.rootGetters,a=e.commit;s["a"].luckMoney.find({userId:t.userId},(function(e,t){e||a("SET_LUCK_MONEY_MAP",t)}))},InsertLuckMoney:function(e,t){var a=e.rootGetters,n=e.dispatch;t.userId=a.userId,t.opened=!1,s["a"].luckMoney.insert(t,(function(e,t){e||n("SetLuckMoneyMap")}))},UpdateLuckMoney:function(e,t){var a=e.rootGetters,n=e.dispatch;s["a"].luckMoney.update({userId:a.userId,MsgKey:t.MsgKey,WeChatId:t.WeChatId},{$set:{opened:!0,Amount:t.Amount}},{},(function(e,t){e||n("SetLuckMoneyMap")}))}},u={SET_NEW_FRIENDS:function(e,t){if(t.Requests&&t.Requests.length>0){var a=t.Requests.sort((function(e,t){return t.ReqTime-e.ReqTime}));e.newFriends=a}else e.newFriends=[]},SET_ADD_FRIENDS:function(e,t){e.addFriends=t},SET_ZOMBIES:function(e,t){e.zombies=t},SET_QR_CODE:function(e,t){for(var a in t)r["default"].set(e.qrCode,a,t[a])},SET_AUTO_TASK_CONFIG:function(e,t){e.autoTaskConfig=t},SET_AUTP_REPLY:function(e,t){e.autoReply=t},SET_AUTP_HI_CONFIG:function(e,t){for(var a in t)t.hasOwnProperty(a)&&r["default"].set(e.autoHiConfig,a,t[a])},SET_SEARCH_CONDITIONS:function(e,t){e.searchResults=t},SET_AUTO_ADD_FRIEND_LOG:function(e,t){console.log("SET_AUTO_ADD_FRIEND_LOG",t),e.autoAddFriendLog=t},SET_PHONES_LIST:function(e,t){console.log("SET_PHONES_LIST",t),e.phonesList=t},SET_CURRENT_CIRCLES:function(e,t){t.sort((function(e,t){return t.PublishTime-e.PublishTime})),e.currentCircles=t},SET_FRIEND_CIRCLE_LOG:function(e,t){t.sort((function(e,t){return t.TaskId-e.TaskId})),e.friendCircleLog=t},SET_CIRCLE_FRIENDS:function(e,t){e.circleFriends=t},SET_CIRCLE_LABELS:function(e,t){e.circleLabels=t.Labels},SET_GROUP_SEND_LOG:function(e,t){e.groupSendLog=t},SET_GROUP_SEND_FRIENDS:function(e,t){e.groupSendFriends=t},SET_GROUP_SEND_ROOMS:function(e,t){e.groupSendRooms=t},SET_GROUP_SEND_LABELS:function(e,t){e.groupSendLabels=t.Labels},SET_CONVERSATIONS:function(e,t){t.sort((function(e,t){return t.UpdateTime-e.UpdateTime}));for(var a=[],n=0;n<t.length;n+=50)a.push(t.slice(n,n+50));e.conversations=a},SET_NEW_MESSAGE_NOTICE:function(e,t){for(var a in t)t.hasOwnProperty(a)&&r["default"].set(e.newMessageNotice,a,t[a])},SET_FRIENDS:function(e,t){for(var a=[],n=0;n<t.length;n+=50)a.push(t.slice(n,n+50));e.friendsAll=t,e.friends=a},SET_CHAT_ROOMS:function(e,t){for(var a=[],n=0;n<t.length;n+=50)a.push(t.slice(n,n+50));e.chatRoomsAll=t,e.chatRooms=a},SET_FRIENDS_MAP:function(e,t){e.friendsMap=t},SET_CHAT_ROOMS_MAP:function(e,t){e.chatRoomsMap=t},SET_MY_REPLY:function(e,t){e.myReply=t},SET_CURRENT_CHATS:function(e,t){e.currentChats=t},SET_LABELS:function(e,t){e.labels=t.Labels},SET_MEMBERS:function(e,t){e.members=t},SET_CONVERSATION_QR_CODE:function(e,t){for(var a in t)r["default"].set(e.conversationQrCode,a,t[a])},SET_CHAT_ROOM_QR_CODE:function(e,t){for(var a in t)r["default"].set(e.chatRoomQrCode,a,t[a])},SET_CONVERSATION_CIRCLES:function(e,t){t.sort((function(e,t){return t.PublishTime-e.PublishTime})),e.conversationCircles=t},SET_LUCK_MONEY_MAP:function(e,t){for(var a in t)r["default"].set(e.luckMoneyMap,t[a].MsgSvrId,t[a])}};t["default"]={namespaced:!0,state:i,getters:c,actions:d,mutations:u}},d307:function(e,t,a){var n={"./conversation.js":"1cbe","./index.js":"2a74","./indexDB.js":"c818","./nedb.js":"ce79","./user.js":"0f9a","./websocket.js":"0fc6"};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id="d307"},d7c9:function(e,t,a){},e1ee:function(e,t,a){"use strict";var n=a("8989"),r=a.n(n);r.a},f067:function(e,t,a){e.exports=a.p+"static/img/conversation-image-error.svg"},f9fc:function(e,t,a){"use strict";var n=a("b9c7"),r=a.n(n);r.a}});