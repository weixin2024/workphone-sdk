(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"48ca":function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"login-page"},[l("el-form",{ref:"ruleForm",staticClass:"my-login-form",attrs:{model:e.loginForm,rules:e.rules,size:"medium","status-icon":""}},[l("el-row",{staticClass:"login-logo",attrs:{type:"flex",justify:"center"}},[l("img",{attrs:{src:o("cdf3"),alt:"",srcset:""}}),l("span",[e._v("聚聊客服")])]),l("el-row",{staticClass:"client-server",attrs:{type:"flex",justify:"center"}},[l("el-radio-group",{attrs:{size:"medium"},on:{change:function(t){e.clientOrServer="client"}},model:{value:e.clientOrServer,callback:function(t){e.clientOrServer=t},expression:"clientOrServer"}},[l("el-radio-button",{attrs:{label:"client"}},[e._v("客户端登陆")]),l("el-radio-button",{attrs:{label:"server"}},[l("span",{on:{click:e.link2manager}},[e._v("管理端登陆")])])],1)],1),l("el-form-item",{attrs:{prop:"name"}},[l("el-input",{attrs:{size:"medium",maxlength:"20",placeholder:"输入用户名","prefix-icon":"el-icon-user"},on:{input:function(t){return e.changeName()}},model:{value:e.loginForm.name,callback:function(t){e.$set(e.loginForm,"name",t)},expression:"loginForm.name"}})],1),l("el-form-item",{attrs:{prop:"pass"}},[l("el-input",{attrs:{type:"password",size:"medium",autocomplete:"off","show-password":"",placeholder:"输入密码",maxlength:20,"prefix-icon":"el-icon-unlock"},model:{value:e.loginForm.pass,callback:function(t){e.$set(e.loginForm,"pass",t)},expression:"loginForm.pass"}})],1),l("el-row",{attrs:{type:"flex",justify:"space-around"}},[l("el-checkbox",{model:{value:e.rememberPwd,callback:function(t){e.rememberPwd=t},expression:"rememberPwd"}},[e._v("记住密码")]),l("el-checkbox",{model:{value:e.modifyWebsockUrl,callback:function(t){e.modifyWebsockUrl=t},expression:"modifyWebsockUrl"}},[e._v("修改ws地址")])],1),e.modifyWebsockUrl?l("el-input",{attrs:{size:"medium",placeholder:"请输入内容"},model:{value:e.newWebsockUrl,callback:function(t){e.newWebsockUrl=t},expression:"newWebsockUrl"}},[l("template",{slot:"prepend"},[e._v("ws://")])],2):l("el-input",{staticStyle:{visibility:"hidden"},attrs:{size:"medium"}},[l("template",{slot:"prepend"},[e._v("ws://")])],2),l("el-form-item",{staticClass:"login_btn_box"},[l("el-button",{staticClass:"login-btn",attrs:{type:"primary",size:"medium",loading:e.loading,disabled:e.loading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1),l("span",{staticClass:"login-logo-version"},[e._v("v-"+e._s(e.version))])],1),"electron"===e.currentMode?l("div",{staticClass:"close-title",staticStyle:{"-webkit-app-region":"drag"}},[l("el-button",{staticClass:"el-icon-close",staticStyle:{"-webkit-app-region":"no-drag"},attrs:{size:"mini",type:"text"},on:{click:e.closeElectron}})],1):e._e()],1)},i=[],r=(o("b0c0"),o("5530")),s=o("2f62"),a={name:"LoginPage",data:function(){var e=function(e,t,o){if(!t)return o(new Error("用户名不能为空"));o()},t=function(e,t,o){""===t?o(new Error("请输入密码")):o()};return{rememberPwd:!1,modifyWebsockUrl:!1,version:o("9224").version,clientOrServer:"client",newWebsockUrl:"192.168.0.116:13088",loginForm:{name:"",pass:""},rules:{name:[{validator:e,trigger:"blur"}],pass:[{validator:t,trigger:"blur"}]}}},components:{},computed:Object(r["a"])(Object(r["a"])({},Object(s["b"])({currentMode:"currentMode",loading:"websocket/loginLoading"})),{},{localName:function(){return localStorage.getItem("localNameOfJuboChat")?localStorage.getItem("localNameOfJuboChat"):""},localPwd:function(){return localStorage.getItem("localPwdOfJuboChat")?localStorage.getItem("localPwdOfJuboChat"):""}}),methods:{changeName:function(){this.loginForm.pass=""},submitForm:function(e){var t=this;if(this.modifyWebsockUrl){if(!this.newWebsockUrl)return void this.$message.warning("请输入ws地址");localStorage.setItem("localWSOfJuboChat",this.newWebsockUrl),this.$store.commit("websocket/SET_WEBSOCKET_URL","ws://"+this.newWebsockUrl)}else this.$store.commit("websocket/SET_WEBSOCKET_URL","ws://www.jjldkj.com:13088");this.$refs[e].validate((function(e){if(!e)return!1;t.rememberPwd&&(localStorage.setItem("localNameOfJuboChat",t.loginForm.name),localStorage.setItem("localPwdOfJuboChat",t.loginForm.pass)),t.$store.commit("SET_LOGIN_INFO",{name:t.loginForm.name,pass:t.loginForm.pass}),t.$store.commit("websocket/SET_LOGIN_LOADING",!0),"WebSocket"in window?(t.$store.dispatch("websocket/createWebSocket"),setTimeout((function(){t.$store.dispatch("websocket/DeviceAuthReq")}),500)):t.$message({message:"您的浏览器不支持 WebSocket!，请更换浏览器！",type:"error"}),setTimeout((function(){t.loading&&(t.$store.commit("websocket/SET_LOGIN_LOADING",!1),t.$message({message:"无法连接到服务器！",type:"error"}))}),3e3)}))},resetForm:function(e){this.$refs[e].resetFields()},closeElectron:function(){this.$ipcRenderer.send("operations","exit")},link2manager:function(){var e="http://www.baidu.com";if("electron"===this.currentMode){var t=window.require("electron"),o=t.shell;o.openExternal(e)}else{var l=document.createElement("a");l.setAttribute("href",e),l.setAttribute("target","_blank"),l.setAttribute("id","js_a"),document.getElementById("js_a")&&document.body.removeChild(document.getElementById("js_a")),document.body.appendChild(l),l.click()}}},watch:{rememberPwd:function(e){e?localStorage.setItem("remarkPwdOfJuboChat",1):(localStorage.removeItem("remarkPwdOfJuboChat"),localStorage.removeItem("localNameOfJuboChat"),localStorage.removeItem("localPwdOfJuboChat"))},modifyWebsockUrl:function(e){e?localStorage.setItem("ModifyWSOfJuboChat",1):localStorage.removeItem("ModifyWSOfJuboChat")}},created:function(){localStorage.getItem("remarkPwdOfJuboChat")&&(this.rememberPwd=!0,this.localName&&this.localPwd&&(this.loginForm.name=this.localName,this.loginForm.pass=this.localPwd)),this.changeName=this._.debounce(this.changeName,300)},mounted:function(){localStorage.getItem("ModifyWSOfJuboChat")&&(this.modifyWebsockUrl=!0,localStorage.getItem("localWSOfJuboChat")&&(this.newWebsockUrl=localStorage.getItem("localWSOfJuboChat")))}},n=a,c=(o("847e"),o("2877")),u=Object(c["a"])(n,l,i,!1,null,"5dc5c95a",null);t["default"]=u.exports},"847e":function(e,t,o){"use strict";var l=o("9f11"),i=o.n(l);i.a},9224:function(e){e.exports=JSON.parse('{"name":"jubo-chat","version":"3.3.8","private":true,"description":"this is description","author":"xyy","scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","lint":"vue-cli-service lint","build:web":"vue-cli-service build --mode web","electron:build":"vue-cli-service --mode electronp electron:build","electron:serve":"vue-cli-service --mode electron electron:serve","postinstall":"electron-builder install-app-deps","postuninstall":"electron-builder install-app-deps","test:unit":"vue-cli-service test:unit"},"dependencies":{"animate.css":"^3.7.2","axios":"^0.19.0","core-js":"^3.3.2","dayjs":"^1.8.17","default-passive-events":"^1.0.10","element-ui":"^2.13.0","lodash":"^4.17.15","nedb":"^1.8.0","number-precision":"^1.3.2","register-service-worker":"^1.6.2","vue":"^2.6.10","vue-i18n":"^8.15.0","vue-router":"^3.3.2","vuex":"^3.0.1","vuex-router-sync":"^5.0.0"},"devDependencies":{"@vue/cli-plugin-babel":"^4.0.0","@vue/cli-plugin-eslint":"^4.0.0","@vue/cli-plugin-pwa":"^4.0.0","@vue/cli-plugin-router":"^4.0.0","@vue/cli-plugin-unit-mocha":"^4.0.0","@vue/cli-plugin-vuex":"^4.0.0","@vue/cli-service":"^4.0.0","@vue/test-utils":"1.0.0-beta.29","babel-eslint":"^10.0.3","babel-plugin-component":"^1.1.1","babili-webpack-plugin":"^0.1.2","cfonts":"^2.8.2","chai":"^4.1.2","electron":"^9.0.2","electron-packager":"^14.2.1","eslint":"^5.16.0","eslint-friendly-formatter":"^4.0.1","eslint-plugin-vue":"^5.0.0","multispinner":"^0.2.1","sass":"^1.19.0","sass-loader":"^8.0.0","vue-cli-plugin-electron-builder":"^2.0.0-rc.1","vue-template-compiler":"^2.6.10","webpack-hot-middleware":"^2.25.0"},"main":"background.js","productName":"聚聊"}')},"9f11":function(e,t,o){}}]);