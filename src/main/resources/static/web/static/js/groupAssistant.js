(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["groupAssistant"],{"0425":function(e,t,a){"use strict";var s=a("e019"),i=a.n(s);i.a},"1e75":function(e,t,a){"use strict";var s=a("bd9f"),i=a.n(s);i.a},"464e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"group-assistant-send"},[a("el-steps",{staticClass:"group-send-steps",attrs:{"align-center":"",active:e.currentStep,"process-status":e.currentStepStatus,"finish-status":"success"}},[a("el-step",{attrs:{title:"选择好友/群",icon:"el-icon-s-check"}}),a("el-step",{attrs:{title:"编辑推送",icon:"el-icon-edit"}})],1),a("div",{staticClass:"group-send-content"},[0===e.currentStep?a("div",{staticClass:"chose-friend"},[a("el-tabs",{staticClass:"chose-friend-left scroll",attrs:{type:"border-card"},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"选择好友推送消息",name:"choseFriends"}},[a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"},[e._v("所在微信")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.queryInfoByWechatId},model:{value:e.wechat2send,callback:function(t){e.wechat2send=t},expression:"wechat2send"}},e._l(e.wechats,(function(e,t){return a("el-option",{key:t,attrs:{label:e.WeChatNick,value:e.WeChatId,disabled:!e.IsOnline||!e.IsLogined}})})),1)],1),a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"},[e._v("所在分组")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择",disabled:""},model:{value:e.team2screen,callback:function(t){e.team2screen=t},expression:"team2screen"}})],1),a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"},[e._v("性别")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.gender2screen,callback:function(t){e.gender2screen=t},expression:"gender2screen"}},e._l(e.gender,(function(e,t){return a("el-option",{key:"gender"+t,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"},[e._v("状态")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择",disabled:""},model:{value:e.state2screen,callback:function(t){e.state2screen=t},expression:"state2screen"}})],1),a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"},[e._v("标签")]),a("el-radio-group",{model:{value:e.lableRadio,callback:function(t){e.lableRadio=t},expression:"lableRadio"}},[a("el-radio",{attrs:{label:"inclusion"}},[e._v("包含")]),a("el-radio",{attrs:{label:"exclude"}},[e._v("不包含")])],1)],1),a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"}),a("el-select",{attrs:{multiple:"",filterable:"",placeholder:e.wechat2send?"请选择":"请先选择微信",disabled:!e.wechat2send,"collapse-tags":""},model:{value:e.labels2screen,callback:function(t){e.labels2screen=t},expression:"labels2screen"}},e._l(e.groupSendLabels,(function(e,t){return a("el-option",{key:"label"+t,attrs:{label:e.LabelName,value:e.LabelId}})})),1)],1),a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"},[e._v("城市")]),a("el-radio-group",{model:{value:e.cityRadio,callback:function(t){e.cityRadio=t},expression:"cityRadio"}},[a("el-radio",{attrs:{label:"inclusion"}},[e._v("包含")]),a("el-radio",{attrs:{label:"exclude"}},[e._v("不包含")])],1)],1),a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"}),a("el-cascader",{attrs:{options:e.chineseCities,props:{expandTrigger:"hover",multiple:!0},"show-all-levels":!1,filterable:"","collapse-tags":""},on:{change:e.handleCityChange},model:{value:e.cities,callback:function(t){e.cities=t},expression:"cities"}})],1),a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"}),a("el-button",{attrs:{type:"primary"},on:{click:e.screenFriends}},[e._v("筛选")]),a("el-button",{attrs:{type:"info"},on:{click:e.resetFilter}},[e._v("重置")])],1)]),a("el-tab-pane",{attrs:{label:"选择群推送消息",name:"choseRooms"}},[a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"},[e._v("所在微信")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.queryInfoByWechatId},model:{value:e.wechat2send2room,callback:function(t){e.wechat2send2room=t},expression:"wechat2send2room"}},e._l(e.wechats,(function(e,t){return a("el-option",{key:t,attrs:{label:e.WeChatNick,value:e.WeChatId,disabled:!e.IsOnline||!e.IsLogined}})})),1)],1),a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"},[e._v("群名称")]),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.room2screen,callback:function(t){e.room2screen=t},expression:"room2screen"}})],1),a("div",{staticClass:"el-tab-pane-item"},[a("span",{staticClass:"el-tab-pane-item-title"}),a("el-button",{attrs:{type:"primary"},on:{click:e.screenRooms}},[e._v("筛选")]),a("el-button",{attrs:{type:"info"},on:{click:e.resetFilter}},[e._v("重置")])],1)])],1),a("div",{staticClass:"chose-friend-right"},[a("el-table",{attrs:{data:e.tableData[e.currentPage[e.activeTabName]-1],stripe:"",border:"",height:"50","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"60px"}}),a("el-table-column",{attrs:{label:"昵称",prop:"choseFriends"===e.activeTabName?"FriendNick":"NickName"}}),"choseFriends"===e.activeTabName?a("el-table-column",{attrs:{label:"备注名",prop:"Memo"}}):e._e(),"choseFriends"===e.activeTabName?a("el-table-column",{attrs:{label:"性别",prop:"Gender",width:"80px"}}):e._e(),"choseFriends"===e.activeTabName?a("el-table-column",{attrs:{label:"城市",prop:"City"}}):e._e(),"choseRooms"===e.activeTabName?a("el-table-column",{attrs:{label:"群成员人数",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return["choseRooms"===e.activeTabName?a("span",{domProps:{textContent:e._s(t.row.MemberList.length)}}):e._e()]}}],null,!1,3735638004)}):e._e(),a("el-table-column",{attrs:{width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{attrs:{type:"checkbox"},domProps:{checked:e.computedCheckState(t.row)},on:{click:function(a){return e.choseRow(t.row)}}})]}}],null,!1,2316015403)},[a("template",{slot:"header"},[a("el-button",{staticStyle:{padding:"5px"},attrs:{size:"mini",type:"primary"},on:{click:e.choseAllOfPage}},[e._v("全选本页")])],1)],2)],1),a("el-pagination",{attrs:{"current-page":e.currentPage[e.activeTabName],"page-sizes":[15,30,45,60],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1):1===e.currentStep?a("div",{staticClass:"set-send-content"},[a("el-button",{staticClass:"add-new-msg-btn",attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.showContentDialog=!0}}},[e._v("新增消息")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.contentData,height:"60",border:"",stripe:""}},[a("el-table-column",{attrs:{label:"消息类型",prop:"msgType",width:"180"}}),a("el-table-column",{attrs:{label:"消息内容",prop:"msgContent"}}),a("el-table-column",{attrs:{label:"操作",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",disabled:0===t.$index},on:{click:function(a){return e.removeUp(t.$index,t.row)}}},[e._v("上移")]),a("el-button",{attrs:{size:"mini",disabled:t.$index===e.contentData.length-1},on:{click:function(a){return e.removeDown(t.$index,t.row)}}},[e._v("下移")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteContent(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"set-time"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"broke-time"},[a("span",[e._v("间隔范围(秒)")]),a("el-input-number",{staticStyle:{margin:"0 5px"},attrs:{size:"small","controls-position":"right",min:1,max:e.maxTime-1,disabled:""},model:{value:e.minTime,callback:function(t){e.minTime=t},expression:"minTime"}}),a("span",[e._v("-")]),a("el-input-number",{staticStyle:{margin:"0 5px"},attrs:{size:"small","controls-position":"right",min:e.minTime+1,max:120,disabled:""},model:{value:e.maxTime,callback:function(t){e.maxTime=t},expression:"maxTime"}})],1),a("div",{staticClass:"broke-time"},[a("span",[e._v("群发开始时间")]),a("el-radio-group",{staticStyle:{"margin-left":"10px"},model:{value:e.timeRadio,callback:function(t){e.timeRadio=t},expression:"timeRadio"}},[a("el-radio",{attrs:{label:"rightNow"}},[e._v("立即开始")]),a("el-radio",{attrs:{label:"timing"}},[e._v("定时开始")]),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",clearable:"",size:"small",disabled:"rightNow"===e.timeRadio},model:{value:e.refTime,callback:function(t){e.refTime=t},expression:"refTime"}})],1)],1),e._m(0)])],1):e._e()]),a("div",{staticClass:"group-send-operation"},[e.currentStep>0?a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-arrow-left"},on:{click:function(t){e.currentStep=0}}},[e._v("上一步")]):e._e(),0===e.currentStep?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.sendNext("all")}}},[e._v("发送所有筛选结果的用户")]):e._e(),0===e.currentStep?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.sendNext("check")}}},[e._v("发送选择的用户")]):e._e(),1===e.currentStep?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.sureSend}},[e._v("确认发送")]):e._e()],1),a("el-dialog",{staticClass:"el-dialog-content",attrs:{title:"新增消息",visible:e.showContentDialog},on:{"update:visible":function(t){e.showContentDialog=t}}},[a("div",{staticClass:"set-type"},[a("span",{staticClass:"set-type-span"},[e._v("消息类型")]),a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.msgType,callback:function(t){e.msgType=t},expression:"msgType"}},e._l(e.msgTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"set-content"},["Text"===e.msgType?a("el-input",{staticStyle:{height:"auto"},attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"500","show-word-limit":"",autosize:{minRows:6,maxRows:8},resize:"none"},model:{value:e.msgContent,callback:function(t){e.msgContent=t},expression:"msgContent"}}):e._e(),"Picture"===e.msgType||"Video"===e.msgType||"Voice"===e.msgType?a("el-upload",{class:{hide:e.hideUpload},attrs:{action:"http://www.jjldkj.com:10089/fileUpload","list-type":"picture-card",data:e.upData,"before-upload":e.beforeImageUpload,"on-change":e.handleImageChange,"on-success":e.handleImageSuccess,"on-error":e.handleImageError,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,multiple:!1,"show-file-list":e.showFileList,accept:"Picture"===e.msgType?".jpg, .png, .jpeg":"Video"===e.msgType?".mp4":".mp3, .amr"}},[a("i",{staticClass:"el-icon-plus"})]):e._e(),"Link"===e.msgType?a("el-form",{ref:"linkDialog",staticClass:"we-app",attrs:{model:e.linkForm,rules:e.linkRules,"label-width":"110px"}},e._l(e.linkForm,(function(t,s){return a("el-form-item",{key:"link"+s,attrs:{label:s,prop:s}},[a("el-input",{attrs:{disabled:"TypeStr"===s,clearable:""},model:{value:e.linkForm[s],callback:function(t){e.$set(e.linkForm,s,t)},expression:"linkForm[index]"}})],1)})),1):e._e(),"WeApp"===e.msgType?a("el-form",{ref:"weappDialog",staticClass:"we-app",attrs:{model:e.weapp,rules:e.weappRules,"label-width":"110px"}},e._l(e.weapp,(function(t,s){return a("el-form-item",{key:"weapp"+s,attrs:{label:s,prop:s}},[a("el-input",{attrs:{clearable:""},model:{value:e.weapp[s],callback:function(t){e.$set(e.weapp,s,t)},expression:"weapp[index]"}})],1)})),1):e._e()],1),a("div",{staticClass:"tips"},["Picture"===e.msgType?a("span",{staticClass:"el-icon-info"},[e._v(" 仅支持jpg/png文件，且不超过2MB")]):"Video"===e.msgType?a("span",{staticClass:"el-icon-info",staticStyle:{margin:"10px"}},[e._v(" 仅支持10M以内的MP4文件")]):"Voice"===e.msgType?a("span",{staticClass:"el-icon-info"},[e._v(" 仅支持mp3和微信的amr文件")]):e._e()]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["Link"===e.msgType||"WeApp"===e.msgType?a("el-button",{on:{click:function(t){return e.resetForm(e.msgType)}}},[e._v("重 置")]):e._e(),a("el-button",{attrs:{type:"info"},on:{click:function(t){e.showContentDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addContent(e.msgType)}}},[e._v("确 定")])],1)]),a("el-dialog",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-image",{staticStyle:{width:"600px",height:"600px"},attrs:{src:e.msgContent,fit:"contain"}})],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"#e6a23c","font-size":"14px"}}),e._v(" 选择时间间隔范围后，每一条消息完成发送后将会在范围内随机一个时间，按顺序推送下一条， 随机间隔是为了避免微信判定非人工操作，请合理设置随机时间。 ")])}],n=(a("99af"),a("4de4"),a("c975"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("1276"),a("6b75"));function l(e){if(Array.isArray(e))return Object(n["a"])(e)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("e260"),a("3ca3"),a("ddb0");function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var o=a("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e){return l(e)||r(e)||Object(o["a"])(e)||c()}var p=a("b85c"),u=a("5530"),m=a("2f62"),h=a("b824"),b={name:"GroupAssistantSend",data:function(){return{activeTabName:"choseFriends",pageSize:15,currentPage:{choseFriends:1,choseRooms:1},showContentDialog:!1,msgTypes:[{label:"文本消息",value:"Text"},{label:"图片消息",value:"Picture"},{label:"语音消息",value:"Voice"},{label:"视频消息",value:"Video"},{label:"链接消息",value:"Link"},{label:"小程序消息",value:"WeApp"}],canNotCreatedType:["Voice","Link","WeApp"],msgType:"Text",msgContent:"",contentData:[],minTime:1,maxTime:60,timeRadio:"rightNow",refTime:(new Date).getTime(),hideUpload:!1,showFileList:!0,imageUrl:"",upData:{myfile:""},dialogVisible:!1,weapp:{AppId:"wxe99ba6e7fa3e8672",SourceName:"gh_5b0c2f762fc0@app",Icon:"http://wx.qlogo.cn/mmhead/Q3auHgzwzM5bBMPvk6Oohdlo4FpjGgLsTtcSYJKhibnoQWFphTVy7Bw/96",Source:"建业+",Title:"考拉之选 点断保鲜膜 食品级材质",Thumb:"http://gaia-projectc.oss-cn-hangzhou.aliyuncs.com/wxid_9988ti1oz81g22%2Fth_2fb4cbd7008c2e3cc33f6e49573c00cc.jpg",PagePath:"pages/index/index.html?_type=h5Link&h5url=https%3A%2F%2Fmall.yijiahn.com%2Fmall%2Fapp%2Fstatic%2Fgoods%2F3711147.html%3Fid%3D3711147&sharedUserId=2269485"},weappRules:{AppId:[{required:!0,message:"请输入AppId",trigger:"blur"}],SourceName:[{required:!0,message:"请输入SourceName",trigger:"blur"}],Icon:[{required:!0,message:"请输入Icon",trigger:"blur"}],PagePath:[{required:!0,message:"请输入PagePath",trigger:"blur"}],Title:[{required:!0,message:"请输入Title",trigger:"blur"}],Thumb:[{required:!0,message:"请输入Thumb",trigger:"blur"}]},linkForm:{Title:"“关闭领馆”落下帷幕! 外媒: 他们不再含泪抗议, 而是在大使馆前笑着合影",Thumb:"http://www.jjldkj.com/files/phone/files/20200730/935FC7F27A771E914BD47DC261385309.jpg",Url:"https://iflow.uc.cn/webview/news?app=meitullq-iflow&aid=17561738358438069514&cid=100&zzd_from=meitullq-iflow&uc_param_str=dndsfrvesvntnwpfgibicp&recoid=2043722754382504392&rd_type=reco&sp_gz=0&activity=1&activity2=1&dn=cf9807c357d1e8561c9aef3f75f05e71&enuid=AAPTn90AUlH8qpsGXMgpzgD%2BzWybOCOjkJX%2B2Ou9k8Lrzg%3D%3D&uc_iflow_biz=cmt%3A1&imei=bTkwAA3esoPsTi%2Ff%2FLrBSXG9zpdQ2YF7sw%3D%3D",Des:"震惊Des",TypeStr:"[链接]"},linkRules:{Title:[{required:!0,message:"请输入Title",trigger:"blur"}],Thumb:[{required:!0,message:"请输入Thumb",trigger:"blur"}],Url:[{required:!0,message:"请输入Url",trigger:"blur"}],Des:[{required:!0,message:"请输入Des",trigger:"blur"}]},tags:[],search:"",searchContent:[],dialogSearchVisible:!1,timeOut:10,sending:!1,friendIdChose:[],wechat2send:"",friends2send:[],team2screen:"",state2screen:"",gender2screen:"",lableRadio:"inclusion",labels2screen:[],cities:[],city2screen:[],wechat2send2room:"",rooms2send:[],room2screen:"",currentStep:0,currentStepStatus:"process",cityRadio:"inclusion",tableDataFriends:[],totalFriends:0,tableDataRooms:[],totalRooms:0,gender:[{value:"Male",label:"男"},{value:"Female",label:"女"}],ids2send:[]}},computed:Object(u["a"])(Object(u["a"])({},Object(m["b"])({wechats:"conversation/wechats",groupSendRooms:"nedb/groupSendRooms",groupSendLabels:"nedb/groupSendLabels",groupSendFriends:"nedb/groupSendFriends"})),{},{chineseCities:function(){var e,t=[],a=Object(p["a"])(h);try{for(a.s();!(e=a.n()).done;){var s,i=e.value,n=[],l=Object(p["a"])(i.list);try{for(l.s();!(s=l.n()).done;){var r=s.value;n.push({value:r,label:r})}}catch(o){l.e(o)}finally{l.f()}t.push({value:i.letter,label:i.letter,children:n})}}catch(o){a.e(o)}finally{a.f()}return t},totalNum:function(){return"choseFriends"===this.activeTabName?this.totalFriends:"choseRooms"===this.activeTabName?this.totalRooms:0},tableData:function(){var e=this.pageSize,t=[];if("choseFriends"===this.activeTabName)for(var a=0;a<this.tableDataFriends.length;a+=e)t.push(this.tableDataFriends.slice(a,a+e));else for(var s=0;s<this.tableDataRooms.length;s+=e)t.push(this.tableDataRooms.slice(s,s+e));return t}}),methods:{queryInfoByWechatId:function(){"choseFriends"===this.activeTabName&&this.wechat2send?(this.tableDataFriends=[],this.$store.dispatch("nedb/SetGroupSendLabels",this.wechat2send),this.$store.dispatch("nedb/SetGroupSendFriends",this.wechat2send)):"choseRooms"===this.activeTabName&&this.wechat2send2room&&(this.tableDataRooms=[],this.$store.dispatch("nedb/SetGroupSendRooms",this.wechat2send2room))},handleCityChange:function(e){if(0!==e.length){var t,a=[],s=Object(p["a"])(e);try{for(s.s();!(t=s.n()).done;){var i=t.value;a.push(i[1])}}catch(n){s.e(n)}finally{s.f()}this.city2screen=a}},screenFriends:function(){var e=this;if(this.wechat2send){var t,a=[],s=Object(p["a"])(this.groupSendFriends);try{for(s.s();!(t=s.n()).done;){var i=t.value;a.push(i)}}catch(b){s.e(b)}finally{s.f()}if(this.gender2screen&&(a=a.filter((function(t,a,s){return t.Gender===e.gender2screen}))),this.labels2screen.length>0){var n,l=[],r=Object(p["a"])(a);try{var o=function(){var t=n.value,a=[];t.LabelIds&&(a=t.LabelIds.replace('"',"[").replace('"',"]").split(","));var s=e.labels2screen.filter((function(e){return a.indexOf(e.toString())>-1}));("inclusion"===e.lableRadio&&s.length>0||"exclude"===e.lableRadio&&0===s.length)&&l.push(t)};for(r.s();!(n=r.n()).done;)o()}catch(b){r.e(b)}finally{r.f()}a=l}if(this.city2screen.length>0){var c,d=[],u=Object(p["a"])(a);try{for(u.s();!(c=u.n()).done;){var m=c.value,h=m.City?m.City:"";("inclusion"===this.cityRadio&&this.city2screen.indexOf(h)>-1||"exclude"===this.cityRadio&&-1===this.city2screen.indexOf(h))&&d.push(m)}}catch(b){u.e(b)}finally{u.f()}a=d}this.totalFriends=a.length,this.tableDataFriends=a}else this.$message.warning("请选择微信！")},screenRooms:function(){if(this.wechat2send2room){var e,t=[],a=Object(p["a"])(this.groupSendRooms);try{for(a.s();!(e=a.n()).done;){var s=e.value;t.push(s)}}catch(o){a.e(o)}finally{a.f()}if(this.room2screen){var i,n=[],l=Object(p["a"])(t);try{for(l.s();!(i=l.n()).done;){var r=i.value;r.NickName.indexOf(this.room2screen)>-1&&n.push(r)}}catch(o){l.e(o)}finally{l.f()}t=n}this.totalRooms=t.length,this.tableDataRooms=t}else this.$message.warning("请选择微信！")},resetFilter:function(){"choseFriends"===this.activeTabName?(this.wechat2send="",this.gender2screen="",this.lableRadio="inclusion",this.labels2screen=[],this.cities=[],this.cityRadio="inclusion",this.city2screen=[],this.tableDataFriends=[]):(this.wechat2send2room="",this.room2screen="",this.tableDataRooms=[])},indexMethod:function(e){return e+1},choseRow:function(e){if("choseFriends"===this.activeTabName){var t=e.FriendId,a=this.friends2send.indexOf(t);a>=0?this.friends2send.splice(a,1):this.friends2send.push(t)}else{var s=e.UserName,i=this.rooms2send.indexOf(s);i>=0?this.rooms2send.splice(i,1):this.rooms2send.push(s)}},computedCheckState:function(e){return"choseFriends"===this.activeTabName?this.friends2send.indexOf(e.FriendId)>=0:this.rooms2send.indexOf(e.UserName)>=0},choseAllOfPage:function(){var e=this.tableData[this.currentPage[this.activeTabName]-1];if("choseFriends"===this.activeTabName){var t=e.map((function(e){return e.FriendId})),a=this.friends2send.filter((function(e){return t.indexOf(e)>-1}));if(a.length===t.length){var s,i=Object(p["a"])(e);try{for(i.s();!(s=i.n()).done;){var n=s.value,l=n.FriendId,r=this.friends2send.indexOf(l);this.friends2send.splice(r,1)}}catch(F){i.e(F)}finally{i.f()}}else{var o,c=Object(p["a"])(e);try{for(c.s();!(o=c.n()).done;){var d=o.value,u=d.FriendId,m=this.friends2send.indexOf(u);m<0&&this.friends2send.push(u)}}catch(F){c.e(F)}finally{c.f()}}}else{var h=e.map((function(e){return e.UserName})),b=this.rooms2send.filter((function(e){return h.indexOf(e)>-1}));if(b.length===h.length){var f,g=Object(p["a"])(e);try{for(g.s();!(f=g.n()).done;){var v=f.value,y=v.UserName,w=this.rooms2send.indexOf(y);this.rooms2send.splice(w,1)}}catch(F){g.e(F)}finally{g.f()}}else{var T,k=Object(p["a"])(e);try{for(k.s();!(T=k.n()).done;){var C=T.value,x=C.UserName,_=this.rooms2send.indexOf(x);_<0&&this.rooms2send.push(x)}}catch(F){k.e(F)}finally{k.f()}}}},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e)},handleCurrentChange:function(e){this.currentPage[this.activeTabName]=e},addContent:function(e){var t=this,a={msgType:this.msgType};switch(e){case"Text":case"Picture":case"Voice":case"Video":a.msgContent=this.msgContent;break;case"Link":this.$refs["linkDialog"].validate((function(e){if(!e)return!1;a.msgContent=JSON.stringify(t.linkForm)}));break;case"WeApp":this.$refs["weappDialog"].validate((function(e){if(!e)return!1;a.msgContent=JSON.stringify(t.weapp)}));break;default:break}this.contentData.push(a),this.showContentDialog=!1,this.msgType="Text",this.msgContent="",this.hideUpload=!1,this.showFileList=!0},resetForm:function(e){"Link"===e?this.$refs["linkDialog"].resetFields():this.$refs["weappDialog"].resetFields()},handleImageChange:function(e,t){t.length>0&&(this.showFileList=!0,this.hideUpload=!0)},beforeImageUpload:function(e){if("Picture"===this.msgType){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.warning("上传头像图片只能是 JPG|PNG 格式!"),a||this.$message.warning("上传头像图片大小不能超过 2MB!"),this.upData.myfile=e,t&&a}if("Video"===this.msgType){var s="video/mp4"===e.type,i=e.size/1024/1024<10;return s||this.$message.warning("上传视频只能是 MP4 格式!"),i||this.$message.warning("上传视频大小不能超过 10MB!"),this.upData.myfile=e,s&&i}if("Voice"===this.msgType){var n=e.name.replace(/.+\./,"").toLowerCase(),l="mp3"===n||"amr"===n,r=e.size/1024/1024<10;return l?r?("mp3"===n?this.upData.isMp3ToAmr=!0:"amr"===n&&(this.upData.isAmrToMp3=!1),this.upData.myfile=e,l&&r):void this.$message.warning("上传语音大小不能超过 10MB!"):void this.$message.warning("上传语音只能是 MP3或AMR 格式!")}},handleImageSuccess:function(e,t){this.msgContent=e.data.url},handleImageError:function(e,t){this.$alert(e,"文件上传失败",{type:"error"}),this.hideUpload=!1},handleRemove:function(e,t){this.msgContent="",this.showFileList=!1,this.hideUpload=!1},handlePictureCardPreview:function(e){this.dialogVisible=!0},removeUp:function(e){var t=this.contentData,a=e-1;t.splice.apply(t,[a,1].concat(d(t.splice(e,1,t[a]))))},removeDown:function(e){var t=this.contentData,a=e+1;t.splice.apply(t,[a,1].concat(d(t.splice(e,1,t[a]))))},deleteContent:function(e){this.contentData.splice(e,1)},sendNext:function(e){var t=[];t="all"===e?"choseFriends"===this.activeTabName?this.tableDataFriends.map((function(e){return e.FriendId})):this.tableDataRooms.map((function(e){return e.UserName})):"choseFriends"===this.activeTabName?this.friends2send:this.rooms2send,t.length>0?(this.ids2send=t,this.currentStep=1):this.$message.warning("请先选择要发送的好友！")},transformTime:function(e){var t=new Date(e),a=t.getFullYear()+"-",s=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",n=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",l=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),r=a+s+i+n+l;return r},sendTimer:function(e,t){var a=this,s=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){a.$store.dispatch("websocket/AddTaskTimeInfo",t),e+1===Math.ceil(a.friendIdChose.length/200)&&s.close()}),500*e)},sureSend:function(){if(0!==this.contentData.length){var e=(new Date).getTime();"timing"===this.timeRadio&&(e=this.refTime);var t,a={Text:1,Picture:2,Voice:3,Video:4,Link:6,WeApp:13},s=0,i=Object(p["a"])(this.contentData);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(a[n.msgType]){var l=e+13e4*s,r={tasktype:"choseFriends"===this.activeTabName?1:5,state:1,wechatId:"choseFriends"===this.activeTabName?this.wechat2send:this.wechat2send2room,wechatList:"choseFriends"===this.activeTabName?this.friends2send:this.rooms2send,execute_time:this.transformTime(l),restype:a[n.msgType],content:n.msgContent};this.$store.dispatch("websocket/AddTaskTimeInfo",r)}s++}}catch(o){i.e(o)}finally{i.f()}this.$message.success("群发好友任务,已经下发!")}else this.$message.warning("请设置群发内容！")}}},f=b,g=(a("1e75"),a("2877")),v=Object(g["a"])(f,s,i,!1,null,"b5490b08",null);t["default"]=v.exports},afa5:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"task-time-info-group"},[a("el-table",{staticClass:"task-time-info-table",staticStyle:{width:"100%"},attrs:{data:e.groupSendLog,stripe:"",height:"60px"}},[a("el-table-column",{attrs:{label:"任务类型",filters:e.taskTypes,prop:"tasktype","filter-method":e.filterTaskTypes},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.tasktypeMap[t.row.tasktype])}})]}}])}),a("el-table-column",{attrs:{label:"消息类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.restypeMap[t.row.restype])}})]}}])}),a("el-table-column",{attrs:{prop:"content",label:"消息内容"}}),a("el-table-column",{attrs:{label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(0===t.row.state?"发送成功":"发送中")}})]}}])}),a("el-table-column",{attrs:{prop:"execute_time",label:"开始时间"}}),a("el-table-column",{attrs:{label:"结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.createTime))}})]}}])})],1)],1)},i=[],n=a("5530"),l=a("2f62"),r={name:"GroupAssistantLog",data:function(){return{tasktypeMap:{1:"PC群发消息",2:"PC发朋友圈",3:"删除好友",4:"删除群聊",5:"群发群消息",6:"按标签群发",7:"发朋友圈",8:"批量加好友"},restypeMap:{Text:1,Picture:2,Voice:3,Video:4,Link:6,WeApp:13,1:"文本",2:"图片",3:"语音",4:"视频",6:"链接",13:"小程序"},taskTypes:[{text:"群发好友",value:1},{text:"群发群",value:5},{text:"发朋友圈",value:2}]}},computed:Object(n["a"])({},Object(l["b"])({groupSendLog:"nedb/groupSendLog"})),methods:{filterTaskTypes:function(e,t,a){var s=a["property"];return t[s]===e}},mounted:function(){this.$store.dispatch("websocket/GetTaskInfoList")}},o=r,c=(a("0425"),a("2877")),d=Object(c["a"])(o,s,i,!1,null,"3cc2ad66",null);t["default"]=d.exports},b824:function(e){e.exports=JSON.parse('[{"letter":"A","list":["安远","安义","安溪","安丘","安宁","安吉","安福","阿城","安阳","安顺","鞍山","安庆","安康","阿里","阿勒泰","阿拉善盟","阿克苏","阿坝"]},{"letter":"B","list":["北京","博兴","博罗","博爱","璧山","宾阳","宾县","滨海","巴彦","宝应","亳州","博尔塔拉","滨州","毕节","本溪","北海","巴中","巴音郭楞","巴彦淖尔","包头","保山","宝鸡","保定","蚌埠","白银","白山","百色","白城"]},{"letter":"C","list":["成都","常州","长沙","长春","重庆","朝阳","巢湖","长治","昌吉","昌都","常德","沧州","郴州","承德","潮州","滁州","楚雄","崇左","池州","赤峰","枞阳","从化","慈溪","淳安","崇州","崇义","崇仁","茌平","成武","城口","呈贡","潮安","昌邑","长兴","长汀","长泰","常熟","常山","昌乐","长乐","长海","长丰","长岛","曹县","苍山","苍南"]},{"letter":"D","list":["丹东","大理","东莞","大连","大兴安岭","大同","大庆","德州","德阳","德宏","达州","大丰","东营","迪庆","定西","单县","当涂","砀山","岱山","大邑","大田","大埔","丹阳","德化","德安","大足","大余","德庆","德清","登封","德惠","定南","垫江","电白","德兴","东海","东阿","定远","定陶","东台","东山","东平","东明","东源","东阳","东乡","洞头","都江堰","都昌","东至"]},{"letter":"E","list":["鄂尔多斯","恩施","恩平","鄂州"]},{"letter":"F","list":["佛山","福州","防城港","抚顺","阜新","阜阳","抚州","法库","富阳","福清","阜宁","阜南","富民","浮梁","福鼎","福安","佛冈","分宜","凤阳","奉新","丰县","凤台","丰顺","封开","奉节","奉化","丰都","丰城","费县","肥西","肥东","肥城","方正","繁昌"]},{"letter":"G","list":["广州","贵阳","甘南","赣州","甘孜","广安","广元","贵港","桂林","果洛","固原","赣县","赣榆","高安","固镇","古田","贵溪","灌云","冠县","灌南","光泽","广饶","广宁","广丰","广德","广昌","巩义","高州","高邮","高邑","高要","高唐","高青","高密","高陵","皋兰","高淳","藁城"]},{"letter":"H","list":["杭州","哈尔滨","邯郸","海口","黑河","合肥","鹤岗","河池","鹤壁","汉中","哈密","海西","海南","海东","海北","惠州","呼伦贝尔","葫芦岛","呼和浩特","黄石","黄山","黄南","黄冈","淮南","怀化","淮北","淮安","红河","贺州","菏泽","河源","和田地","衡阳","衡水","怀远","怀宁","怀集","桦甸","华安","洪泽","和县","鹤山","和平","横县","横峰","合川","含山","海阳","海盐","海宁","海门","海丰","海安","湖州","户县","霍山","霍邱","呼兰","湖口","惠民","惠来","惠东","会昌","惠安","化州","桓台"]},{"letter":"J","list":["鸡西","酒泉","九江","锦州","晋中","济宁","金华","荆州","荆门","景德镇","晋城","金昌","揭阳","嘉峪关","吉安","江门","佳木斯","济南","吉林","嘉兴","焦作","井冈山","旌德","靖安","即墨","揭西","界首","揭东","嘉祥","嘉善","胶州","胶南","蕉岭","蛟河","吉安","建阳","建瓯","建宁","建湖","江阴","姜堰","江山","将乐","江津","江都","建德","九台","九江","吉水","晋州","金寨","缙云","金乡","金溪","进贤","金堂","金坛","晋宁","金门","晋江","金湖","井陉","泾县","景宁","靖江","巨野","莒县","句容","莒南","鄄城","济源","济阳","绩溪"]},{"letter":"K","list":["昆明","开封","喀什地","克拉玛依","克孜勒","开化","开平","开县","开阳","康平","垦利","昆山"]},{"letter":"L","list":["连云港","凉山","乐山","拉萨","廊坊","莱芜","来宾","洛阳","柳州","兰州","六盘水","六安","丽水","林芝","临沂","临夏","临汾","临沧","丽江","辽源","辽阳","聊城","乐亭","乐清","乐平","乐陵","雷州","乐昌","乐安","兰溪","蓝田","郎溪","莱州","莱阳","莱西","来安","吕梁","泸州","漯河","娄底","龙岩","陇南","临邑","临沭","临朐","临泉","临清","临海","陵县","灵寿","灵璧","临安","利津","黎川","辽中","连州","涟水","连山","连平","连南","廉江","连江","莲花","梁山","梁平","连城","鹿寨","芦溪","禄劝","鹿泉","罗源","洛宁","罗定","庐江","陆河","陆丰","滦县","滦南","栾川","栾城","龙游","龙泉","龙南","龙门","龙口","龙海","龙川","隆安","溧阳","利辛","浏阳","柳江","柳城","溧水"]},{"letter":"M","list":["马鞍山","茂名","眉山","梅州","绵阳","牡丹江","马山","梅县","蒙城","孟津","蒙阴","孟州","明光","明溪","闽侯","闽清","木兰"]},{"letter":"N","list":["南昌","南京","南宁","南通","宁波","南充","南平","南阳","那曲","内江","宁德","怒江","南安","南澳","南城","南川","南丰","南靖","南康","南陵","南雄","宁都","宁国","宁海","宁化","宁津","宁乡","宁阳","农安"]},{"letter":"P","list":["盘锦","攀枝花","平顶山","平凉","萍乡","普洱","莆田","濮阳","磐安","磐石","沛县","蓬莱","彭水","彭泽","彭州","平度","平和","平湖","屏南","平山","平潭","平阳","平阴","平邑","平原","平远","郫县","邳州","鄱阳","浦城","浦江","蒲江","普兰店","普宁"]},{"letter":"Q","list":["青岛","泉州","黔东","黔南","黔西南","庆阳","清远","秦皇岛","钦州","齐齐哈尔","七台河","曲靖","衢州","迁安","潜山","铅山","迁西","启东","齐河","綦江","祁门","清流","青田","清新","青阳","庆元","庆云","清镇","青州","沁阳","邛崃","栖霞","全椒","曲江","曲阜","全南"]},{"letter":"R","list":["日喀则","日照","饶平","仁化","融安","荣昌","荣成","融水","如东","如皋","瑞安","瑞昌","瑞金","乳山","汝阳","乳源"]},{"letter":"S","list":["上海","沈阳","深圳","石家庄","苏州","三门峡","三明","三亚","商丘","商洛","上饶","汕尾","汕头","绍兴","韶关","山南","邵阳","十堰","双鸭山","石嘴山","绥化","松原","四平","朔州","泗阳","泗县","泗水","四会","泗洪","沭阳","顺昌","舒兰","舒城","双流","双城","寿县","寿宁","寿光","石柱","始兴","石台","石狮","石林","石城","射阳","歙县","深泽","莘县","嵊州","嵊泗","沙县","绍兴","邵武","尚志","上虞","上犹","上饶","上林","上栗","商河","上杭","上高","诏安","三门","三江","松阳","嵩县","松溪","嵩明","宿州","宿迁","随州","遂宁","宿松","遂溪","濉溪","睢宁","遂川","遂昌","宿豫"]},{"letter":"T","list":["天津","台州","唐山","塔城地","泰安","太原","泰州","天水","铁岭","铜川","通化","通辽","铜陵","铜仁","通州","桐乡","铜山","潼南","桐庐","铜陵","铜梁","通河","铜鼓","桐城","天台","天长","滕州","唐海","郯城","泰兴","泰顺","台山","泰宁","太湖","泰和","太和","太仓","吐鲁番"]},{"letter":"W","list":["潍坊","威海","武汉","无锡","渭南","文山","温州","乌海","芜湖","乌兰察布","乌鲁木齐","武威","吴忠","武陟","婺源","武夷山","武义","巫溪","无为","巫山","武平","武宁","武鸣","武隆","五莲","吴江","无极","五华","芜湖","五河","无棣","吴川","武城","五常","涡阳","温县","汶上","温岭","翁源","文登","文成","微山","万载","万年","望江","望城","万安","瓦房店","梧州"]},{"letter":"X","list":["厦门","西安","许昌","徐州","襄樊","湘潭","湘西","咸宁","咸阳","孝感","锡林郭勒盟","兴安盟","邢台","西宁","新乡","信阳","新余","忻州","西双版纳","宣城","峡江","夏津","象山","响水","仙居","仙游","萧县","霞浦","息烽","新安","新昌","信丰","新丰","新干","兴国","兴化","兴宁","行唐","荥阳","星子","辛集","新建","新津","新乐","新民","新密","新泰","新兴","新沂","信宜","新郑","休宁","秀山","修水","修文","修武","寻甸","盱眙","徐闻","寻乌"]},{"letter":"Y","list":["扬州","烟台","雅安","延安","延边","盐城","阳江","阳泉","宜宾","宜昌","伊春","宜春","伊犁哈萨克","银川","营口","鹰潭","益阳","永州","岳阳","玉林","榆林","运城","云浮","玉树","玉溪","阳春","阳东","阳谷","阳山","阳信","阳西","扬中","偃师","延寿","兖州","伊川","宜丰","宜黄","依兰","宜良","沂南","英德","颍上","沂水","义乌","黟县","宜兴","弋阳","宜阳","沂源","仪征","永安","永川","永春","永登","永定","永丰","永吉","永嘉","永康","邕宁","永泰","永新","永修","尤溪","酉阳","元氏","禹城","于都","岳西","余干","玉环","余江","郁南","云安","郓城","云和","云霄","云阳","玉山","榆树","鱼台","玉田","余姚","榆中"]},{"letter":"Z","list":["漳州","遵化","郑州","中山","珠海","枣庄","张家界","张家口","张掖","湛江","肇庆","昭通","镇江","中卫","周口","舟山","驻马店","株洲","淄博","自贡","资阳","遵义","赞皇","增城","张家港","漳平","漳浦","章丘","樟树","沾化","赵县","招远","正定","政和","柘荣","中牟","忠县","周宁","周至","庄河","诸城","诸暨","紫金","资溪","邹城","邹平"]}]')},bd9f:function(e,t,a){},e019:function(e,t,a){}}]);